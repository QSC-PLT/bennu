define(["nu/stream","parse/parse"],function(e,a){var f=function(b,c){return a.bind(b,function(b){return a.next(c,a.always(b))})},g=function(b,c){return a.cons(c,a.many(a.next(b,c)))},h=function(b,c){return a.rec(function(d){return a.cons(c,a.optional(e.end,a.next(b,a.optional(e.end,d))))})},j=function(b,c){return a.bind(c,a.rec(function(d){return function(i){return a.optional(i,a.bind(b,function(b){return a.bind(c,function(a){return d(b(i,a))})}))}}))},k=function(b,c){return a.rec(function(d){return a.bind(c,
function(c){return a.optional(c,a.bind(b,function(b){return a.bind(d,function(d){return a.always(b(c,d))})}))})})};return{then:f,between:function(b,c,d){return a.next(b,a.then(d,c))},sepBy1:g,sepBy:function(b,c){return a.optional(e.end,g(b,c))},sepEndBy1:h,sepEndBy:function(b,c){return a.either(h(b,c),a.next(a.optional(null,b),a.always(e.end)))},endBy1:function(b,c){return a.many1(f(c,b))},endBy:function(b,c){return a.many(f(c,b))},chainl1:j,chainl:function(b,c,d){return a.optional(c,j(b,d))},chainr1:k,
chainr:function(b,c,d){return a.optional(c,k(b,d))}}});
