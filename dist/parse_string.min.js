define(["parse/parse","stream/stream"],function(c){var h=Array.prototype.map,i=Array.prototype.reduce,d=RegExp.prototype.test,j=function(a,b){return a.valueOf()===b.valueOf()},e=function(a){return function(b,d){return new c.ExpectError(b,a+' Found: "'+d+'"')}},f=function(a){return c.token(j.bind(void 0,a),e('"'+a+'"'))},k=function(a,b){return c.next(b,a)},l=function(a,b){return a[b]=a[b]||{}},m=function(a,b){i.call(b,l,a)[""]=null;return a},g=function(a,b){var d=[];Object.keys(a).forEach(function(e){1===
e.length&&d.push(c.attempt(c.next(f(e),g(a[e],b+e))))});a.hasOwnProperty("")&&d.push(c.always(b));return c.choice.apply(void 0,d)},n=c.token(d.bind(/^.$/),e("any character")),p=c.token(d.bind(/^[a-z]$/i),e("any letter character")),q=c.token(d.bind(/^\s$/i),e("any space character")),d=c.token(d.bind(/^[0-9]$/i),e("any digit character"));return{character:f,string:function(a){return h.call(a,f).reduceRight(k,c.always(a))},trie:function(a){return g(a.reduce(m,{}),"")},anyChar:n,letter:p,space:q,digit:d}});
