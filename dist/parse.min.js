("undefined"!==typeof define?define:function(i){parse=i()})(["stream"],function(i){function F(a,b){return v(f(a,b))}function v(a){return function(b,d,e,c,j){e=b.a;return(c=b.input)?(c=i.k(c),a(c)?d(c,b.next(c)):j(new s(e,"token:'"+c+"'"))):j(new s(e,"end of input"))}}function G(a,b){return g(b,f(n,t(w(a,b))))}function S(a,b){return p(b)}function H(a,b){return 0>=a?q:I(g(b,f(n,H(a-1,b))))}function x(a,b){return 0>=a?q:g(b,f(n,x(a-1,b)))}function T(){throw Error("Many parser applied to a parser that accepts an empty string");
}function U(a,b){return g(b,f(n,a))}function I(a){return u(J(a),q)}function n(a,b){return g(a,function(a){return p(i.j(b,a))})}function u(a,b){return function(d,e,c,j,f){return l(a,[d,e,c,j,function(a){return l(b,[d,e,c,j,function(b){return f(new y(a,b))}])}])}}function w(a,b){return g(a,k(b))}function J(a){return function(b,d,e,c,j){return l(a,[b,d,j,c,j])}}function K(a){return function(b,d,e,c){return c(a(b),b)}}function L(a,b){return g(a,function(a){return b.apply(void 0,i.o(a))})}function g(a,
b){return function(d,e,c,j,f){return l(a,[d,function(a,d){return l(b(a),[d,e,c,e,c])},c,function(a,d){return l(b(a),[d,e,c,j,f])},f])}}function p(a){return function(b,d,e,c){return c(a,b)}}function M(a,b){return N(a,new r(b,m(1,1)))}function O(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.b;)c=c[0].apply(void 0,c[1]);return c()}}function z(a){var b;return b=a(function(){return b.apply(this,arguments)})}function P(a,b){return Object.defineProperty(b,"displayName",{value:a,writable:!1})}function A(a,
b){h.call(this,a,["Expected "+(b||"")])}function s(a,b){h.call(this,a,["Unexpected "+(b||"")])}function B(a){h.call(this,a,["Error"])}function y(a,b){this.f=a;this.g=b;h.call(this,a.a)}function h(a,b){this.d=b;this.a=a}function r(a,b){this.input=a;this.a=b}function V(){return"{line: "+this.c+" col: "+this.e+"}"}function l(a,b){var d=[a,b];d.b=!0;return d}function Q(a,b){return a===b}function R(a){return a}function f(a){return 1===arguments.length?a:a.bind.apply(a,arguments)}var W=Array.prototype.join,
X=Array.prototype.map,Y=Array.prototype.reduce,Z=Array.prototype.reduceRight,k=f(f,R),m;m=function(a,b){return Object.freeze({line:a,column:b,toString:V})};m.i=function(a,b){return"\n"===b?m(a.c+1,1):m(a.c,a.e+1)};r.prototype.next=function(a){return this.b||(this.b=new r(i.n(this.input),m.i(this.a,a)))};h.prototype=Error();Object.defineProperties(h.prototype,{message:{get:function(){var a=this.l;return"At position:"+this.a+" ["+(a?W.call(a,", "):"")+"]"}},messages:{get:function(){return this.d}}});
y.prototype=new h;Object.defineProperty(y.prototype,"messages",{get:function(){return[this.f.m,this.g.message]}});B.prototype=new h;s.prototype=new h;A.prototype=new h;var N=O(k,function(a){return function(){throw a;}}),$=O(k(k(!0)),k(k(!1))),C=k(function(a,b,d,e,c){return c(new B(a.a))}),aa=k(function(a,b,d,e,c){return!a.input?e(null,a):c(new A(a.a,"end of input"))}),ba=f(K,R),q=p(i.end),D;D=function(){return Z.call(arguments,U,q)};var t;t=function(a){function b(b,e,c,f,g){return l(a,[b,e,c,T,g])}
return z(function(a){return I(g(b,f(n,a)))})};var E;E=function(a,b,d){if(b<a)a=C;else var e=x(a,d),c=H(b-a,d),a=g(e,function(a){return g(c,function(b){return p(i.concat(a,b))})});return a};var ca=f(E,0,1),da=v(k(!0));return{ParseError:h,UnknownError:B,UnexpectError:s,ExpectError:A,InputState:r,Position:m,Parser:P,RecParser:z,NamedRecParser:function(a,b){return P(a,z(b))},runParser:N,runStream:M,run:function(a,b){return M(a,i.h(b))},test:function(a,b){var d=i.h(b);return $(a,new r(d,m(1,1)))},always:p,
never:C,bind:g,binda:L,eof:aa,extract:K,examine:ba,attempt:J,lookahead:function(a){return function(b,d,e,c,f){return l(a,[b,function(a){return c(a,b)},e,c,f])}},next:w,either:u,sequence:D,many:t,many1:function(a){return g(a,f(n,t(a)))},times:x,optional:ca,betweenTimes:E,between:function(a,b,d){return L(D(a,d,b),S)},sepBy1:G,sepBy:function(a,b){return u(G(a,b),q)},choice:function(){return 0===arguments.length?C:Y.call(arguments,u)},token:v,anyToken:da,character:function(a,b){return F(b||Q,a)},string:function(a,
b){return X.call(a,f(F,b||Q)).concat(p(a)).reduce(w)}}});
