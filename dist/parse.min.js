("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return l(function(b){return a.toString()===b.toString()})}function l(a){return function(b,d,e,c,p){e=b.b;return b.input?(c=b.input.g(),a(c)?d(c,r(b.input.h(),j.e(e,c))):p(new s(e,"token:'"+c+"'"))):p(new s(e,"end of input"))}}function E(a,b){return 0>=a?v:w(g(b,h(t,E(a-1,b))))}function Q(a){return m([a])}function x(a,b){return 0>=a?v:g(b,h(t,x(a-1,b)))}function R(){throw Error("Many parser applied to a parser that accepts an empty string");
}function w(a){return y(F(a),v)}function t(a,b){return G(a,[b])}function G(a,b){var d=H.bind(b);return g(a,function(){return m(d.apply(void 0,arguments))})}function y(a,b){return function(d,e,c,p,f){return k(a,d,e,c,p,function(a){return k(b,d,e,c,p,function(b){return f(new I(a,b))})})}}function u(a,b){return g(a,i(b))}function F(a){return function(b,d,e,c,f){return k(a,b,d,f,c,f)}}function J(a){return function(b,d,e,c){return c(a(b),b)}}function g(a,b){return function(d,e,c,f,g){return k(a,d,function(a,
d){return k(b(a),d,e,c,e,c)},c,function(a,d){return k(b(a),d,e,c,f,g)},g)}}function m(a){return function(b,d,e,c){return c(a,b)}}function K(a,b){return L(a,r(b,j(1,1)))}function M(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.f;)c=c();return c()}}function N(a){var b;return b=a(function(){return b.apply(this,arguments)})}function z(a,b){f.call(this,a,["Expected "+(b||"")])}function s(a,b){f.call(this,a,["Unexpected "+(b||"")])}function A(a){f.call(this,a,["Error"])}function I(a,b){return new f(a.b,
a.a?H.apply(a.a,b.a):b.a)}function f(a,b){this.a=b;this.b=a}function S(){return"{line: "+this.c+" col: "+this.d+"}"}function r(a,b){return Object.freeze({input:a,pos:b})}function k(){return Object.defineProperty(h.apply(void 0,arguments),"_next",{value:!0,writable:!1})}function O(a,b){return b===a.length?null:Object.freeze({first:i(a[b]),rest:h(O,a,b+1)})}function P(a){return a}function h(a){return 1===arguments.length?a:T.apply(a,arguments)}var H=Array.prototype.concat,U=Array.prototype.join,V=Array.prototype.map,
W=Array.prototype.reduce,n=RegExp.prototype.test,T=Function.prototype.bind,i=h(h,P),B;B=function(a){return void 0===a?null:O(a,0)};var j;j=function(a,b){return Object.freeze({line:a,column:b,toString:S})};j.e=function(a,b){return"\n"===b?j(a.c+1,1):j(a.c,a.d+1)};f.prototype=Error();Object.defineProperty(f.prototype,"message",{get:function(){return"At position:"+this.b+" ["+(this.a?U.call(this.a,", "):"")+"]"}});I.prototype=new f;A.prototype=new f;s.prototype=new f;z.prototype=new f;var L=M(function(a){return function(){return a}},
function(a){return function(){throw a;}}),X=M(i(i(!0)),i(i(!1))),C=i(function(a,b,d,e,c){return c(new A(a.b))}),Y=i(function(a,b,d,e,c){return!a.input?e(null,a):c(new z(a.b,"end of input"))}),Z=h(J,P),v=m([]),D;D=function(a){function b(b,e,c,f,g){return k(a,b,e,c,R,g)}return N(function(a){return w(g(b,h(t,a)))})};var $=l(i(!0)),aa=l(n.bind(/^.$/)),ba=l(n.bind(/^[a-z]$/i)),ca=l(n.bind(/^\s$/i)),n=l(n.bind(/^[0-9]$/i));return{ParseError:f,UnknownError:A,UnexpectError:s,ExpectError:z,InputState:r,Position:j,
always:m,never:C,bind:g,eof:Y,extract:J,examine:Z,attempt:F,lookahead:function(a){return function(b,d,e,c,f){return k(a,b,function(a){return c(a,b)},e,c,f)}},next:u,either:y,many:D,many1:function(a){return g(a,h(t,D(a)))},times:x,optional:function(a){return w(g(a,Q))},betweenTimes:function(a,b,d){return b<a?C:g(x(a,d),h(G,E(b-a,d)))},between:function(a,b,d){return u(a,g(d,function(a){return u(b,m(a))}))},choice:function(){return 0===arguments.length?C:W.call(arguments,y)},token:l,anyToken:$,"char":q,
string:function(a){return V.call(a,q).concat(m(a)).reduce(u)},anyChar:aa,letter:ba,space:ca,digit:n,Parser:N,runParser:L,runStream:K,run:function(a,b){return K(a,B(b))},test:function(a,b){var d=B(b);return X(a,r(d,j(1,1)))}}});
