("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return l(function(b){return a.toString()===b.toString()})}function l(a){return function(b,d,e,c,p){e=b.a;return b.input?(c=b.input.i(),a(c)?d(c,r(b.input.l(),i.j(e,c))):p(new s(e,"token:'"+c+"'"))):p(new s(e,"end of input"))}}function F(a,b){return 0>=a?w:x(g(b,h(t,F(a-1,b))))}function P(a){return m([a])}function y(a,b){return 0>=a?w:g(b,h(t,y(a-1,b)))}function Q(){throw Error("Many parser applied to a parser that accepts an empty string");
}function x(a){return z(G(a),w)}function t(a,b){return H(a,[b])}function H(a,b){var d=R.bind(b);return g(a,function(){return m(d.apply(void 0,arguments))})}function z(a,b){return function(d,e,c,p,f){return j(a,d,e,c,p,function(a){return j(b,d,e,c,p,function(b){return f(new A(a,b))})})}}function u(a,b){return g(a,k(b))}function G(a){return function(b,d,e,c,f){return j(a,b,d,f,c,f)}}function I(a){return function(b,d,e,c){return c(a(b),b)}}function g(a,b){return function(d,e,c,f,g){return j(a,d,function(a,
d){return j(b(a),d,e,c,e,c)},c,function(a,d){return j(b(a),d,e,c,f,g)},g)}}function m(a){return function(b,d,e,c){return c(a,b)}}function J(a,b){return K(a,r(b,i(1,1)))}function L(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.e;)c=c();return c()}}function M(a){var b;return b=a(function(){return b.apply(this,arguments)})}function B(a,b){f.call(this,a,["Expected "+(b||"")])}function s(a,b){f.call(this,a,["Unexpected "+(b||"")])}function C(a){f.call(this,a,["Error"])}function A(a,b){this.g=a;
this.h=b;f.call(this,a.a)}function f(a,b){this.k=b;this.a=a}function S(){return"{line: "+this.c+" col: "+this.f+"}"}function r(a,b){return Object.freeze({input:a,pos:b})}function j(){var a=h.apply(void 0,arguments);a.e=!0;return a}function N(a){return void 0===a||0===a.length?null:new v(a,0,a.length)}function v(a,b,d){this.d=a;this.b=b;this.length=d}function O(a){return a}function h(a){return 1===arguments.length?a:T.apply(a,arguments)}var R=Array.prototype.concat,U=Array.prototype.join,V=Array.prototype.map,
W=Array.prototype.reduce,n=RegExp.prototype.test,T=Function.prototype.bind,k=h(h,O);v.prototype.i=function(){return this.d[this.b]};v.prototype.l=function(){return this.b+1===this.length?null:new v(this.d,this.b+1,this.length)};var i;i=function(a,b){return Object.freeze({line:a,column:b,toString:S})};i.j=function(a,b){return"\n"===b?i(a.c+1,1):i(a.c,a.f+1)};f.prototype=Error();Object.defineProperty(f.prototype,"message",{get:function(){var a=this.k;return"At position:"+this.a+" ["+(a?U.call(a,", "):
"")+"]"}});A.prototype=new f;Object.defineProperty(A.prototype,"messages",{get:function(){return[this.g.m,this.h.message]}});C.prototype=new f;s.prototype=new f;B.prototype=new f;var K=L(function(a){return function(){return a}},function(a){return function(){throw a;}}),X=L(k(k(!0)),k(k(!1))),D=k(function(a,b,d,e,c){return c(new C(a.a))}),Y=k(function(a,b,d,e,c){return!a.input?e(null,a):c(new B(a.a,"end of input"))}),Z=h(I,O),w=m([]),E;E=function(a){function b(b,e,c,f,g){return j(a,b,e,c,Q,g)}return M(function(a){return x(g(b,
h(t,a)))})};var $=l(k(!0)),aa=l(n.bind(/^.$/)),ba=l(n.bind(/^[a-z]$/i)),ca=l(n.bind(/^\s$/i)),n=l(n.bind(/^[0-9]$/i));return{ParseError:f,UnknownError:C,UnexpectError:s,ExpectError:B,InputState:r,Position:i,always:m,never:D,bind:g,eof:Y,extract:I,examine:Z,attempt:G,lookahead:function(a){return function(b,d,e,c,f){return j(a,b,function(a){return c(a,b)},e,c,f)}},next:u,either:z,many:E,many1:function(a){return g(a,h(t,E(a)))},times:y,optional:function(a){return x(g(a,P))},betweenTimes:function(a,b,
d){return b<a?D:g(y(a,d),h(H,F(b-a,d)))},between:function(a,b,d){return u(a,g(d,function(a){return u(b,m(a))}))},choice:function(){return 0===arguments.length?D:W.call(arguments,z)},token:l,anyToken:$,"char":q,string:function(a){return V.call(a,q).concat(m(a)).reduce(u)},anyChar:aa,letter:ba,space:ca,digit:n,Parser:M,runParser:K,runStream:J,run:function(a,b){return J(a,N(b))},test:function(a,b){return X(a,r(N(b),i(1,1)))}}});
