("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a){return function(){throw a;}}function z(a){return j(f(H,a))}function j(a){return function(b,d,e,c,h){e=b.c;c=b.h();return void 0===c?h(new s(e,"end of input")):a(c)?d(c,A(b.i(),k.e(e,c))):h(new s(e,"token:'"+c+"'"))}}function B(a,b){return 0>=a?l([]):function(d,e,c,h,g){return i(b,d,function(d,h){function f(a,b){return e(p.apply(d,a),b)}return i(B(a-1,b),h,f,c,f,g)},c,function(b,c){for(var e=[],d=0;d<a;++d)e[d]=b;
return h(e,c)},g)}}function I(){throw Error("Many parser applied to a parser that accepts an empty string");}function t(a,b){return function(d,e,c,h,f){return i(a,d,e,c,h,function(a){return i(b,d,e,c,h,function(b){return f(g.f(a,b))})})}}function C(a,b){return m(a,q(b))}function D(a){return function(b,d,e,c){return c(a(b),b)}}function m(a,b){return function(d,e,c,h,f){return i(a,d,function(a,d){return i(b(a),d,e,c,e,c)},c,function(a,d){return i(b(a),d,e,c,h,f)},f)}}function l(a){return function(b,
d,e,c){return c(a,b)}}function u(a,b){g.call(this,a,["Expected "+(b||"")])}function s(a,b){g.call(this,a,["Unexpected "+(b||"")])}function v(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?J.call(b,", "):"")+"]"}function E(a,b){this.b=a;this.d=b}function A(a,b){return Object.create(Object.prototype,{input:{value:a,writable:!1},first:{value:f(K,a)},rest:{value:f(L,a)},pos:{value:b,writable:!1}})}function i(a){var b=w.call(arguments,1);return Object.create(Object.prototype,
{_ret:{value:function(){return a.apply(void 0,b)},writable:!1}})}function L(a){return w.call(a,1)}function K(a){return a[0]}function H(a,b){return a===b}function q(a){return f(F,a)}function F(a){return a}function f(a){return Function.prototype.bind.apply(a,[void 0].concat(w.call(arguments,1)))}var p=Array.prototype.concat,J=Array.prototype.join,M=Array.prototype.map,w=Array.prototype.slice,N=Array.prototype.reduce,n=RegExp.prototype.test,k;E.prototype.toString=function(){return"{line: "+this.b+" col: "+
this.d+"}"};k=function(a,b){return Object.freeze(new E(a,b))};k.e=function(a,b){return"\n"===b?k(a.b+1,1):k(a.b,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?p.apply(a.a,b.a):b.a)};v.prototype=new g;s.prototype=new g;u.prototype=new g;var G=q(function(a,b,d,e,c){return c(new v(a),a)}),O=q(function(a,b,d,e,c){return!1==a.input?e(null,a):c(new u(a.c,"end of input"))}),P=f(D,F),x;x=function(a){var b=t(m(function(b,e,c,f,g){return i(a,b,e,c,I,g)},function(a){return m(b,function(b){return l(p.apply([a],
b))})}),l([]));return b};var Q=f(j,n.bind(/^.$/)),R=f(j,n.bind(/^[a-z]$/i)),S=f(j,n.bind(/^\s$/i)),n=f(j,n.bind(/^[0-9]$/i)),y;y=function(a,b){var d=i(a,b,q,r,q,r);return function(){for(var a=d;a&&a.hasOwnProperty("_ret");)a=a.g();return a}};return{ParseError:g,UnknownError:v,UnexpectError:s,ExpectError:u,always:l,never:G,bind:m,eof:O,extract:D,examine:P,attempt:function(a){return function(b,d,e,c,f){return i(a,b,d,f,c,f)}},lookahead:function(a){return function(b,d,e,c,f){return i(a,b,function(a){return c(a,
b)},e,c,f)}},next:C,either:t,many:x,many1:function(a){return m(a,function(b){return m(x(a),function(a){return l(p.apply([b],a))})})},times:B,choice:function(){return 0===arguments.length?G:N.call(arguments,t)},token:j,"char":z,string:function(a){return p.call(M.call(a,z),l(a)).reduce(C)},anyChar:Q,letter:R,space:S,digit:n,runParser:y,run:function(a,b){return y(a,A(b,k(1,1)))()()}}});
