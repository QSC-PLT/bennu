("undefined"!==typeof define?define:function(g){parse=g()})(["stream"],function(g){function G(a,b){return v(l(a,b))}function v(a){return function(b,d,e,c,q){e=b.a;return(c=b.input)?(c=g.k(c),a(c)?d(c,b.next(c)):q(new t(e,"token:'"+c+"'"))):q(new t(e,"end of input"))}}function H(a,b){return m(b,u(w(a,b)))}function U(a,b){return n(b)}function I(a,b){return 0>=a?p:r(x(m(b,I(a-1,b))),p)}function y(a,b){return 0>=a?p:m(b,y(a-1,b))}function V(){throw Error("Many parser applied to a parser that accepts an empty string");
}function W(a,b){return m(b,a)}function J(a,b){return k(a,function(a){return k(b,function(b){return n(g.concat(a,b))})})}function m(a,b){return k(a,function(a){return k(b,function(b){return n(g.j(a,b))})})}function r(a,b){return function(d,e,c,q,f){return i(a,[d,e,c,q,function(a){return i(b,[d,e,c,q,function(b){return f(new z(a,b))}])}])}}function w(a,b){return k(a,h(b))}function x(a){return function(b,d,e,c,f){return i(a,[b,d,f,c,f])}}function K(a){return function(b,d,e,c){return c(a(b),b)}}function L(a,
b){return k(a,function(a){return b.apply(void 0,g.o(a))})}function k(a,b){return function(d,e,c,f,g){return i(a,[d,function(a,d){return i(b(a),[d,e,c,e,c])},c,function(a,d){return i(b(a),[d,e,c,f,g])},g])}}function n(a){return function(b,d,e,c){return c(a,b)}}function M(a,b){return N(a,new s(b,j(1,1)))}function O(a,b){return P(a,new s(b,j(1,1)))}function Q(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.b;)c=c[0].apply(void 0,c[1]);return c()}}function A(a){var b;return b=a(function(){return b.apply(this,
arguments)})}function R(a,b){return Object.defineProperty(b,"displayName",{value:a,writable:!1})}function B(a,b){f.call(this,a,["Expected "+(b||"")])}function t(a,b){f.call(this,a,["Unexpected "+(b||"")])}function C(a){f.call(this,a,["Error"])}function z(a,b){this.f=a;this.g=b;f.call(this,a.a)}function f(a,b){this.d=b;this.a=a}function s(a,b){this.input=a;this.a=b}function X(){return"{line: "+this.c+" col: "+this.e+"}"}function i(a,b){var d=[a,b];d.b=!0;return d}function S(a,b){return a===b}function T(a){return a}
function l(a){return 1===arguments.length?a:a.bind.apply(a,arguments)}var Y=Array.prototype.join,Z=Array.prototype.map,$=Array.prototype.reduce,aa=Array.prototype.reduceRight,h=l(l,T),j;j=function(a,b){return Object.freeze({line:a,column:b,toString:X})};j.i=function(a,b){return"\n"===b?j(a.c+1,1):j(a.c,a.e+1)};s.prototype.next=function(a){return this.b||(this.b=new s(g.n(this.input),j.i(this.a,a)))};f.prototype=Error();Object.defineProperties(f.prototype,{message:{get:function(){var a=this.l;return"At position:"+
this.a+" ["+(a?Y.call(a,", "):"")+"]"}},messages:{get:function(){return this.d}}});z.prototype=new f;Object.defineProperty(z.prototype,"messages",{get:function(){return[this.f.m,this.g.message]}});C.prototype=new f;t.prototype=new f;B.prototype=new f;var P=Q(h,function(a){return function(){throw a;}}),N=Q(h(h(!0)),h(h(!1))),D=h(function(a,b,d,e,c){return c(new C(a.a))}),ba=h(function(a,b,d,e,c){return!a.input?e(null,a):c(new B(a.a,"end of input"))}),ca=l(K,T),p=n(g.end),E;E=function(){return aa.call(arguments,
W,p)};var u;u=function(a){function b(b,e,c,f,g){return i(a,[b,e,c,V,g])}return A(function(a){return r(x(m(b,a)),p)})};var F;F=function(a,b,d){return b<a?D:J(y(a,d),I(b-a,d))};var da=l(F,0,1),ea=v(h(!0));return{ParseError:f,UnknownError:C,UnexpectError:t,ExpectError:B,InputState:s,Position:j,Parser:R,RecParser:A,NamedRecParser:function(a,b){return R(a,A(b))},runParser:P,runStream:O,run:function(a,b){return O(a,g.h(b))},testParser:N,testStream:M,test:function(a,b){return M(a,g.h(b))},always:n,never:D,
bind:k,binda:L,eof:ba,extract:K,examine:ca,attempt:x,lookahead:function(a){return function(b,d,e,c,f){return i(a,[b,function(a){return c(a,b)},e,c,f])}},next:w,either:r,concatParser:J,sequence:E,many:u,many1:function(a){return m(a,u(a))},times:y,optional:da,betweenTimes:F,between:function(a,b,d){return L(E(a,d,b),U)},sepBy1:H,sepBy:function(a,b){return r(H(a,b),p)},choice:function(){return 0===arguments.length?D:$.call(arguments,r)},token:v,anyToken:ea,character:function(a,b){return G(b||S,a)},string:function(a,
b){return Z.call(a,l(G,b||S)).concat(n(a)).reduce(w)}}});
