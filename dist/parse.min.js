("undefined"!==typeof define?define:function(p){parse=p()})(function(){function p(a,b){return t(a,u(b,k(1,1)))}function E(a){return function(){throw a;}}function F(a){return m(function(b){return a.toString()===b.toString()})}function m(a){return function(b,c,e,d,h){e=b.c;return b.input?(d=b.input.h(),a(d)?c(d,u(b.input.i(),k.e(e,d))):h(new q(e,"token:'"+d+"'"))):h(new q(e,"end of input"))}}function G(a,b,c){var e=v(a,c);return b===a?e:l(e,i(H,I(G(1,b-a,c))))}function I(a){return r(J(a),w)}function v(a,
b){return 0>=a?w:l(b,i(x,v(a-1,b)))}function R(){throw Error("Many parser applied to a parser that accepts an empty string");}function x(a,b){return H(a,[b])}function H(a,b){return l(a,y(s,K.bind(b)))}function r(a,b){return function(c,e,d,h,f){return j(a,c,e,d,h,function(a){a=y(f,i(g.f,a));return j(b,c,e,d,h,a)})}}function L(a,b){return l(a,f(b))}function J(a){return function(b,c,e,d,h){return j(a,b,c,h,d,h)}}function M(a){return function(b,c,e,d){return d(a(b),b)}}function l(a,b){return function(c,
e,d,h,f){return j(a,c,function(a,c){return j(b(a),c,e,d,e,d)},d,function(a,c){return j(b(a),c,e,d,h,f)},f)}}function s(a){return function(b,c,e,d){return d(a,b)}}function z(a,b){g.call(this,a,["Expected "+(b||"")])}function q(a,b){g.call(this,a,["Unexpected "+(b||"")])}function A(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?S.call(b,", "):"")+"]"}function N(a,b){this.b=a;this.d=b}function u(a,b){return Object.freeze({input:a,pos:b})}function O(a,
b){return b===a.length?null:Object.freeze({first:f(a[b]),rest:B(O,a,b+1)})}function y(a,b){return function(){return a(b.apply(void 0,arguments))}}function P(a){return a}var K=Array.prototype.concat,S=Array.prototype.join,T=Array.prototype.map,U=Array.prototype.slice,V=Array.prototype.reduce,n=RegExp.prototype.test,i,B;i=B=function(a){var b=U.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))};var f=i(i,P),Q;Q=function(a){return void 0===a?null:O(a,0)};var j=y(function(a){return Object.defineProperty(a,
"_next",{value:!0,writable:!1})},B),k;N.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};k=function(a,b){return Object.freeze(new N(a,b))};k.e=function(a,b){return"\n"===b?k(a.b+1,1):k(a.b,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?K.apply(a.a,b.a):b.a)};A.prototype=new g;q.prototype=new g;z.prototype=new g;var C=f(function(a,b,c,e,d){return d(new A(a),a)}),W=f(function(a,b,c,e,d){return!a.input?e(null,a):d(new z(a.c,"end of input"))}),X=i(M,P),w=s([]),
D;D=function(a){var b;return b=r(l(function(b,e,d,f,g){return j(a,b,e,d,R,g)},function(a){return x(b,a)}),w)};var Y=f(m(n.bind(/^.$/))),Z=f(m(n.bind(/^[a-z]$/i))),$=f(m(n.bind(/^\s$/i))),n=f(m(n.bind(/^[0-9]$/i))),t;t=function(a,b){for(var c=a(b,f,E,f,E);c&&c.g;)c=c();return c()};return{ParseError:g,UnknownError:A,UnexpectError:q,ExpectError:z,InputState:u,Position:k,always:s,never:C,bind:l,eof:W,extract:M,examine:X,attempt:J,lookahead:function(a){return function(b,c,e,d,f){return j(a,b,function(a){return d(a,
b)},e,d,f)}},next:L,either:r,many:D,many1:function(a){return l(a,i(x,D(a)))},times:v,optional:I,betweenTimes:function(a,b,c){return b<a?C():G(a,b,c)},choice:function(){return 0===arguments.length?C:V.call(arguments,r)},token:m,"char":F,string:function(a){return T.call(a,F).concat(s(a)).reduce(L)},anyChar:Y,letter:Z,space:$,digit:n,Parser:function(a){var b;return b=a(function(){return b.apply(this,arguments)})},runParser:t,runStream:p,run:function(a,b){return p(a,Q(b))}}});
