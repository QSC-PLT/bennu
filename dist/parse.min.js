("undefined"!==typeof define?define:function(n){parse=n()})(function(){function n(a,b){return u(g(a,b))}function u(a){return function(b,d,e,c,m){e=b.a;return b.input?(c=b.input.j(),a(c)?d(c,p(b.input.l(),i.k(e,c))):m(new q(e,"token:'"+c+"'"))):m(new q(e,"end of input"))}}function F(a,b){return 0>=a?v:w(h(b,g(r,F(a-1,b))))}function Q(a){return l([a])}function x(a,b){return 0>=a?v:h(b,g(r,x(a-1,b)))}function R(){throw Error("Many parser applied to a parser that accepts an empty string");}function w(a){return y(G(a),
v)}function r(a,b){return H(a,[b])}function H(a,b){var d=S.bind(b);return h(a,function(){return l(d.apply(void 0,arguments))})}function y(a,b){return function(d,e,c,m,f){return j(a,[d,e,c,m,function(a){return j(b,[d,e,c,m,function(b){return f(new z(a,b))}])}])}}function s(a,b){return h(a,k(b))}function G(a){return function(b,d,e,c,f){return j(a,[b,d,f,c,f])}}function I(a){return function(b,d,e,c){return c(a(b),b)}}function h(a,b){return function(d,e,c,f,g){return j(a,[d,function(a,d){return j(b(a),
[d,e,c,e,c])},c,function(a,d){return j(b(a),[d,e,c,f,g])},g])}}function l(a){return function(b,d,e,c){return c(a,b)}}function J(a,b){return K(a,p(b,i(1,1)))}function L(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.f;)c=c[0].apply(void 0,c[1]);return c()}}function A(a){var b;return b=a(function(){return b.apply(this,arguments)})}function M(a,b){return Object.defineProperty(b,"displayName",{value:a,writable:!1})}function B(a,b){f.call(this,a,["Expected "+(b||"")])}function q(a,b){f.call(this,
a,["Unexpected "+(b||"")])}function C(a){f.call(this,a,["Error"])}function z(a,b){this.h=a;this.i=b;f.call(this,a.a)}function f(a,b){this.e=b;this.a=a}function T(){return"{line: "+this.c+" col: "+this.g+"}"}function p(a,b){return Object.freeze({input:a,pos:b})}function j(a,b){a=[a,b];a.f=!0;return a}function N(a){return void 0===a||0===a.length?null:new t(a,0,a.length)}function t(a,b,d){this.d=a;this.b=b;this.length=d}function O(a,b){return a===b}function P(a){return a}function g(a){return 1===arguments.length?
a:U.apply(a,arguments)}var S=Array.prototype.concat,V=Array.prototype.join,W=Array.prototype.map,X=Array.prototype.reduce,U=Function.prototype.bind,k=g(g,P);t.prototype.j=function(){return this.d[this.b]};t.prototype.l=function(){return this.b+1===this.length?null:new t(this.d,this.b+1,this.length)};var i;i=function(a,b){return Object.freeze({line:a,column:b,toString:T})};i.k=function(a,b){return"\n"===b?i(a.c+1,1):i(a.c,a.g+1)};f.prototype=Error();Object.defineProperties(f.prototype,{message:{get:function(){var a=
this.m;return"At position:"+this.a+" ["+(a?V.call(a,", "):"")+"]"}},messages:{get:function(){return this.e}}});z.prototype=new f;Object.defineProperty(z.prototype,"messages",{get:function(){return[this.h.n,this.i.message]}});C.prototype=new f;q.prototype=new f;B.prototype=new f;var K=L(function(a){return function(){return a}},function(a){return function(){throw a;}}),Y=L(k(k(!0)),k(k(!1))),D=k(function(a,b,d,e,c){return c(new C(a.a))}),Z=k(function(a,b,d,e,c){return!a.input?e(null,a):c(new B(a.a,
"end of input"))}),$=g(I,P),v=l([]),E;E=function(a){function b(b,e,c,f,g){return j(a,[b,e,c,R,g])}return A(function(a){return w(h(b,g(r,a)))})};var aa=u(k(!0));return{ParseError:f,UnknownError:C,UnexpectError:q,ExpectError:B,InputState:p,Position:i,Parser:M,RecParser:A,NamedRecParser:function(a,b){return M(a,A(b))},runParser:K,runStream:J,run:function(a,b){return J(a,N(b))},test:function(a,b){return Y(a,p(N(b),i(1,1)))},always:l,never:D,bind:h,eof:Z,extract:I,examine:$,attempt:G,lookahead:function(a){return function(b,
d,e,c,f){return j(a,[b,function(a){return c(a,b)},e,c,f])}},next:s,either:y,many:E,many1:function(a){return h(a,g(r,E(a)))},times:x,optional:function(a){return w(h(a,Q))},betweenTimes:function(a,b,d){return b<a?D:h(x(a,d),g(H,F(b-a,d)))},between:function(a,b,d){return s(a,h(d,function(a){return s(b,l(a))}))},choice:function(){return 0===arguments.length?D:X.call(arguments,y)},token:u,anyToken:aa,character:function(a,b){return n(b||O,a)},string:function(a,b){return W.call(a,g(n,b||O)).concat(l(a)).reduce(s)}}});
