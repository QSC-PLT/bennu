("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return k(function(b){return a.toString()===b.toString()})}function k(a){return function(b,d,e,c,h){e=b.c;return b.input?(c=b.input.h(),a(c)?d(c,t(b.input.i(),l.e(e,c))):h(new r(e,"token:'"+c+"'"))):h(new r(e,"end of input"))}}function F(a,b){return 0>=a?u:v(f(b,i(s,F(a-1,b))))}function T(a){return p([a])}function w(a,b){return 0>=a?u:f(b,i(s,w(a-1,b)))}function U(){throw Error("Many parser applied to a parser that accepts an empty string");
}function v(a){return x(G(a),u)}function s(a,b){return H(a,[b])}function H(a,b){return f(a,y(p,I.bind(b)))}function x(a,b){return function(d,e,c,h,f){return j(a,d,e,c,h,function(a){a=y(f,i(g.f,a));return j(b,d,e,c,h,a)})}}function J(a,b){return f(a,m(b))}function G(a){return function(b,d,e,c,h){return j(a,b,d,h,c,h)}}function K(a){return function(b,d,e,c){return c(a(b),b)}}function f(a,b){return function(d,e,c,h,f){return j(a,d,function(a,d){return j(b(a),d,e,c,e,c)},c,function(a,d){return j(b(a),
d,e,c,h,f)},f)}}function p(a){return function(b,d,e,c){return c(a,b)}}function L(a,b){return M(a,N(b))}function M(a,b){return z(a,t(b,l(1,1)))}function O(a){return function(){throw a;}}function P(a){var b;return b=a(function(){return b.apply(this,arguments)})}function A(a,b){g.call(this,a,["Expected "+(b||"")])}function r(a,b){g.call(this,a,["Unexpected "+(b||"")])}function B(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?V.call(b,", "):"")+"]"}
function Q(a,b){this.b=a;this.d=b}function t(a,b){return Object.freeze({input:a,pos:b})}function R(a,b){return b===a.length?null:Object.freeze({first:m(a[b]),rest:C(R,a,b+1)})}function y(a,b){return function(){return a(b.apply(void 0,arguments))}}function S(a){return a}var I=Array.prototype.concat,V=Array.prototype.join,W=Array.prototype.map,X=Array.prototype.slice,Y=Array.prototype.reduce,n=RegExp.prototype.test,i,C;i=C=function(a){var b=X.call(arguments,1);return Function.prototype.bind.apply(a,
[void 0].concat(b))};var m=i(i,S),N;N=function(a){return void 0===a?null:R(a,0)};var j=y(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},C),l;Q.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};l=function(a,b){return Object.freeze(new Q(a,b))};l.e=function(a,b){return"\n"===b?l(a.b+1,1):l(a.b,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?I.apply(a.a,b.a):b.a)};B.prototype=new g;r.prototype=new g;A.prototype=new g;var z;z=function(a,
b){for(var d=a(b,m,O,m,O);d&&d.g;)d=d();return d()};var D=m(function(a,b,d,e,c){return c(new B(a),a)}),Z=m(function(a,b,d,e,c){return!a.input?e(null,a):c(new A(a.c,"end of input"))}),$=i(K,S),u=p([]),E;E=function(a){function b(b,e,c,f,g){return j(a,b,e,c,U,g)}return P(function(a){return v(f(b,i(s,a)))})};var aa=k(m(!0)),ba=k(n.bind(/^.$/)),ca=k(n.bind(/^[a-z]$/i)),da=k(n.bind(/^\s$/i)),n=k(n.bind(/^[0-9]$/i));return{ParseError:g,UnknownError:B,UnexpectError:r,ExpectError:A,InputState:t,Position:l,
always:p,never:D,bind:f,eof:Z,extract:K,examine:$,attempt:G,lookahead:function(a){return function(b,d,e,c,f){return j(a,b,function(a){return c(a,b)},e,c,f)}},next:J,either:x,many:E,many1:function(a){return f(a,i(s,E(a)))},times:w,optional:function(a){return v(f(a,T))},betweenTimes:function(a,b,d){return b<a?D:f(w(a,d),i(H,F(b-a,d)))},choice:function(){return 0===arguments.length?D:Y.call(arguments,x)},token:k,anyToken:aa,"char":q,string:function(a){return W.call(a,q).concat(p(a)).reduce(J)},anyChar:ba,
letter:ca,space:da,digit:n,Parser:P,runParser:z,runStream:M,run:L,test:function(a,b){try{return L(a,b),!0}catch(d){return!1}}}});
