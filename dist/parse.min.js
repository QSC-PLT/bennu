("undefined"!==typeof define?define:function(f){parse=f()})(["stream"],function(f){function E(a,b){return v(k(a,b))}function v(a){return function(b,d,e,c,n){e=b.a;return(c=b.input)?(c=f.k(c),a(c)?d(c,b.next(c)):n(new r(e,"token:'"+c+"'"))):n(new r(e,"end of input"))}}function F(a,b){return l(b,s(w(a,b)))}function V(a,b){return m(b)}function G(a,b){return 0>=a?t:H(l(b,G(a-1,b)))}function x(a,b){return 0>=a?t:l(b,x(a-1,b))}function W(){throw Error("Many parser applied to a parser that accepts an empty string");
}function X(a,b){return l(b,a)}function H(a){return I(a,f.end)}function J(a,b,d){return p(b,function(b){return p(d,function(c){return m(a(b,c))})})}function I(a,b){return u(a,m(b))}function u(a,b){return function(d,e,c,n,f){return i(a,[d,e,c,n,function(a){return i(b,[d,e,c,n,function(b){return f(new y(a,b))}])}])}}function w(a,b){return p(a,h(b))}function K(a){return function(b,d,e,c){return c(a(b),b)}}function L(a,b){return p(a,function(a){return b.apply(void 0,f.o(a))})}function p(a,b){return function(d,
e,c,f,g){return i(a,[d,function(a,d){return i(b(a),[d,e,c,e,c])},c,function(a,d){return i(b(a),[d,e,c,f,g])},g])}}function m(a){return function(b,d,e,c){return c(a,b)}}function M(a,b){return N(a,new q(b,j(1,1)))}function O(a,b){return P(a,new q(b,j(1,1)))}function Q(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.b;)c=c[0].apply(void 0,c[1]);return c()}}function z(a){var b;return b=a(function(){return b.apply(this,arguments)})}function R(a,b){return Object.defineProperty(b,"displayName",{value:a,
writable:!1})}function A(a,b){g.call(this,a,["Expected "+(b||"")])}function r(a,b){g.call(this,a,["Unexpected "+(b||"")])}function B(a){g.call(this,a,["Error"])}function y(a,b){this.f=a;this.g=b;g.call(this,a.a)}function g(a,b){this.d=b;this.a=a}function q(a,b){this.input=a;this.a=b}function Y(){return"{line: "+this.c+" col: "+this.e+"}"}function i(a,b){var d=[a,b];d.b=!0;return d}function S(a,b){return a===b}function T(a){return a}function k(a){return 1===arguments.length?a:a.bind.apply(a,arguments)}
var Z=Array.prototype.join,$=Array.prototype.map,aa=Array.prototype.reduce,ba=Array.prototype.reduceRight,h=k(k,T),j;j=function(a,b){return Object.freeze({line:a,column:b,toString:Y})};j.i=function(a,b){return"\n"===b?j(a.c+1,1):j(a.c,a.e+1)};q.prototype.next=function(a){return this.b||(this.b=new q(f.n(this.input),j.i(this.a,a)))};g.prototype=Error();Object.defineProperties(g.prototype,{message:{get:function(){var a=this.l;return"At position:"+this.a+" ["+(a?Z.call(a,", "):"")+"]"}},messages:{get:function(){return this.d}}});
y.prototype=new g;Object.defineProperty(y.prototype,"messages",{get:function(){return[this.f.m,this.g.message]}});B.prototype=new g;r.prototype=new g;A.prototype=new g;var P=Q(h,function(a){return function(){throw a;}}),N=Q(h(h(!0)),h(h(!1))),C=h(function(a,b,d,e,c){return c(new B(a.a))}),ca=h(function(a,b,d,e,c){return!a.input?e(null,a):c(new A(a.a,"end of input"))}),da=k(K,T),t=m(f.end),l=k(J,f.j),U=k(J,f.concat),D;D=function(){return ba.call(arguments,X,t)};var s;s=function(a){function b(b,e,c,
f,g){return i(a,[b,e,c,W,g])}return z(function(a){return H(l(b,a))})};var ea=v(h(!0));return{ParseError:g,UnknownError:B,UnexpectError:r,ExpectError:A,InputState:q,Position:j,Parser:R,RecParser:z,NamedRecParser:function(a,b){return R(a,z(b))},runParser:P,runStream:O,run:function(a,b){return O(a,f.h(b))},testParser:N,testStream:M,test:function(a,b){return M(a,f.h(b))},always:m,never:C,bind:p,binda:L,eof:ca,extract:K,examine:da,attempt:function(a){return function(b,d,e,c,f){return i(a,[b,d,f,c,f])}},
lookahead:function(a){return function(b,d,e,c,f){return i(a,[b,function(a){return c(a,b)},e,c,f])}},next:w,either:u,choice:function(){return 0===arguments.length?C:aa.call(arguments,u)},optional:I,consParser:l,concatParser:U,sequence:D,many:s,many1:function(a){return l(a,s(a))},times:x,betweenTimes:function(a,b,d){return b<a?C:U(x(a,d),G(b-a,d))},between:function(a,b,d){return L(D(a,d,b),V)},sepBy1:F,sepBy:function(a,b){return u(F(a,b),t)},token:v,anyToken:ea,character:function(a,b){return E(b||S,
a)},string:function(a,b){return $.call(a,k(E,b||S)).concat(m(a)).reduce(w)}}});
