("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a){return function(){throw a;}}function B(a){return l(g(I,a))}function l(a){return function(b,f,d,c,j){d=b.c;return b.e?(c=b.e(),a(c)?f(c,C(b.i(),m.f(d,c))):j(new s(d,"token:'"+c+"'"))):j(new s(d,"end of input"))}}function J(){throw Error("Many parser applied to a parser that accepts an empty string");}function u(a,b){return function(f,d,c,j,h){return i(a,f,d,c,j,function(a){a=n(h,g(e.g,a));return i(b,f,d,c,j,a)})}}
function D(a,b){return h(a,p(b))}function E(a){return function(b,f,d,c){return c(a(b),b)}}function h(a,b){return function(f,d,c,j,e){return i(a,f,function(a,f){return i(b(a),f,d,c,d,c)},c,function(a,f){return i(b(a),f,d,c,j,e)},e)}}function k(a){return function(b,f,d,c){return c(a,b)}}function v(a,b){e.call(this,a,["Expected "+(b||"")])}function s(a,b){e.call(this,a,["Unexpected "+(b||"")])}function w(a){e.call(this,a,["Error"])}function e(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+
(b?K.call(b,", "):"")+"]"}function F(a,b){this.b=a;this.d=b}function C(a,b){return Object.create(Object.prototype,{first:{value:!a||1>a.length?null:function(){return a[0]}},rest:{value:L(a)},pos:{value:b,writable:!1}})}function i(a){var b=x.call(arguments,1);return Object.create(Object.prototype,{_ret:{value:function(){return a.apply(void 0,b)},writable:!1}})}function L(a){return a&&1>=a.length?p(null):function(){return x.call(a,1)}}function I(a,b){return a===b}function n(a,b){return function(){return a(b.apply(void 0,
arguments))}}function G(a){return a}function g(a){var b=x.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))}var t=Array.prototype.concat,K=Array.prototype.join,M=Array.prototype.map,x=Array.prototype.slice,N=Array.prototype.reduce,q=RegExp.prototype.test,p=g(g,G),O=g(n,function(a){return function(){for(var b=a;b&&b.hasOwnProperty("_ret");)b=b.h();return b}}),m;F.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};m=function(a,b){return Object.freeze(new F(a,
b))};m.f=function(a,b){return"\n"===b?m(a.b+1,1):m(a.b,a.d+1)};e.prototype=Error();e.g=function(a,b){return new e(a.c,a.a?t.apply(a.a,b.a):b.a)};w.prototype=new e;s.prototype=new e;v.prototype=new e;var H=p(function(a,b,f,d,c){return c(new w(a),a)}),P=p(function(a,b,f,d,c){return a.e?d(null,a):c(new v(a.c,"end of input"))}),Q=g(E,G),y,R=k([]);y=function(a){var b=u(h(function(b,d,c,e,g){return i(a,b,d,c,J,g)},function(a){return h(b,n(k,t.bind(a)))}),R);return b};var z,S=k([]);z=function(a,b){return 0>=
a?S:h(b,function(f){return h(z(a-1,b),n(k,t.bind(f)))})};var T=g(l,q.bind(/^.$/)),U=g(l,q.bind(/^[a-z]$/i)),V=g(l,q.bind(/^\s$/i)),q=g(l,q.bind(/^[0-9]$/i)),A;A=O(function(a,b){return i(a,b,p,r,p,r)});return{ParseError:e,UnknownError:w,UnexpectError:s,ExpectError:v,always:k,never:H,bind:h,eof:P,extract:E,examine:Q,attempt:function(a){return function(b,f,d,c,e){return i(a,b,f,e,c,e)}},lookahead:function(a){return function(b,f,d,c,e){return i(a,b,function(a){return c(a,b)},d,c,e)}},next:D,either:u,
many:y,many1:function(a){return h(a,function(b){return h(y(a),n(k,t.bind(b)))})},times:z,choice:function(){return 0===arguments.length?H:N.call(arguments,u)},token:l,"char":B,string:function(a){return M.call(a,B).concat(k(a)).reduce(D)},anyChar:T,letter:U,space:V,digit:q,runParser:A,run:n(function(a){return a()()},function(a,b){return A(a,C(b,m(1,1)))})}});
