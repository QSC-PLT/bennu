("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a){return function(){throw a;}}function B(a){return k(function(b){return a.toString()===b.toString()})}function k(a){return function(b,f,d,c,j){d=b.c;return b.input?(c=b.input.h(),a(c)?f(c,C(b.input.i(),l.e(d,c))):j(new s(d,"token:'"+c+"'"))):j(new s(d,"end of input"))}}function M(){throw Error("Many parser applied to a parser that accepts an empty string");}function t(a,b){return m(a,p(q,D.bind([b])))}function u(a,
b){return function(f,d,c,j,e){return h(a,f,d,c,j,function(a){a=p(e,i(g.f,a));return h(b,f,d,c,j,a)})}}function E(a,b){return m(a,e(b))}function F(a){return function(b,f,d,c){return c(a(b),b)}}function m(a,b){return function(f,d,c,j,e){return h(a,f,function(a,f){return h(b(a),f,d,c,d,c)},c,function(a,f){return h(b(a),f,d,c,j,e)},e)}}function q(a){return function(b,f,d,c){return c(a,b)}}function v(a,b){g.call(this,a,["Expected "+(b||"")])}function s(a,b){g.call(this,a,["Unexpected "+(b||"")])}function w(a){g.call(this,
a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?N.call(b,", "):"")+"]"}function G(a,b){this.b=a;this.d=b}function C(a,b){return Object.freeze({input:a,pos:b})}function H(a,b){return b===a.length?null:Object.freeze({first:e(a[b]),rest:x(H,a,b+1)})}function p(a,b){return function(){return a(b.apply(void 0,arguments))}}function I(a){return a}var D=Array.prototype.concat,N=Array.prototype.join,O=Array.prototype.map,P=Array.prototype.slice,Q=Array.prototype.reduce,
n=RegExp.prototype.test,i,x;i=x=function(a){var b=P.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))};var e=i(i,I),J;J=function(a){return void 0===a?null:H(a,0)};var h=p(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},x),R=i(p,function(a){return function(){for(var b=a;b&&b.g;)b=b();return b}}),l;G.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};l=function(a,b){return Object.freeze(new G(a,b))};l.e=function(a,b){return"\n"===
b?l(a.b+1,1):l(a.b,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?D.apply(a.a,b.a):b.a)};w.prototype=new g;s.prototype=new g;v.prototype=new g;var K=e(function(a,b,f,d,c){return c(new w(a),a)}),S=e(function(a,b,f,d,c){return!a.input?d(null,a):c(new v(a.c,"end of input"))}),T=i(F,I),y,U=q([]);y=function(a){var b=u(m(function(b,d,c,e,g){return h(a,b,d,c,M,g)},function(a){return t(b,a)}),U);return b};var z,V=q([]);z=function(a,b){return 0>=a?V:m(b,i(t,z(a-1,b)))};var W=e(k(n.bind(/^.$/))),
X=e(k(n.bind(/^[a-z]$/i))),Y=e(k(n.bind(/^\s$/i))),n=e(k(n.bind(/^[0-9]$/i))),A;A=R(function(a,b){return h(a,b,e,r,e,r)});var L=p(function(a){return a()()},function(a,b){return A(a,C(b,l(1,1)))});return{ParseError:g,UnknownError:w,UnexpectError:s,ExpectError:v,always:q,never:K,bind:m,eof:S,extract:F,examine:T,attempt:function(a){return function(b,f,d,c,e){return h(a,b,f,e,c,e)}},lookahead:function(a){return function(b,e,d,c,g){return h(a,b,function(a){return c(a,b)},d,c,g)}},next:E,either:u,many:y,
many1:function(a){return m(a,i(t,y(a)))},times:z,choice:function(){return 0===arguments.length?K:Q.call(arguments,u)},token:k,"char":B,string:function(a){return O.call(a,B).concat(q(a)).reduce(E)},anyChar:W,letter:X,space:Y,digit:n,Parser:function(a){var b;return b=a(function(){return b.apply(this,arguments)})},runParser:A,runStream:L,run:function(a,b){return L(a,J(b))}}});
