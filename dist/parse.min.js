("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a,b){return x(e(a,b))}function x(a){return function(b,d,f,c,e){f=b.a;return b.input?(c=b.input.j(),a(c)?d(c,s(b.input.l(),j.k(f,c))):e(new t(f,"token:'"+c+"'"))):e(new t(f,"end of input"))}}function D(a,b){return g(b,e(l,u(n(a,b))))}function E(a,b){return 0>=a?m:F(g(b,e(l,E(a-1,b))))}function v(a,b){return 0>=a?m:g(b,e(l,v(a-1,b)))}function Q(){throw Error("Many parser applied to a parser that accepts an empty string");
}function R(a,b){return g(b,e(l,a))}function F(a){return p(G(a),m)}function l(a,b){return H(a,[b])}function H(a,b){return g(a,function(a){return q(S.call(b,a))})}function p(a,b){return function(d,f,c,e,g){return k(a,[d,f,c,e,function(a){return k(b,[d,f,c,e,function(b){return g(new y(a,b))}])}])}}function n(a,b){return g(a,i(b))}function G(a){return function(b,d,f,c,e){return k(a,[b,d,e,c,e])}}function I(a){return function(b,d,f,c){return c(a(b),b)}}function g(a,b){return function(d,f,c,e,g){return k(a,
[d,function(a,d){return k(b(a),[d,f,c,f,c])},c,function(a,d){return k(b(a),[d,f,c,e,g])},g])}}function q(a){return function(b,d,f,c){return c(a,b)}}function J(a,b){return K(a,s(b,j(1,1)))}function L(a,b){return function(d,f){for(var c=d(f,a,b,a,b);c&&c.f;)c=c[0].apply(void 0,c[1]);return c()}}function z(a){var b;return b=a(function(){return b.apply(this,arguments)})}function M(a,b){return Object.defineProperty(b,"displayName",{value:a,writable:!1})}function A(a,b){h.call(this,a,["Expected "+(b||"")])}
function t(a,b){h.call(this,a,["Unexpected "+(b||"")])}function B(a){h.call(this,a,["Error"])}function y(a,b){this.h=a;this.i=b;h.call(this,a.a)}function h(a,b){this.e=b;this.a=a}function T(){return"{line: "+this.c+" col: "+this.g+"}"}function s(a,b){return Object.freeze({input:a,pos:b})}function k(a,b){var d=[a,b];d.f=!0;return d}function N(a){return void 0===a||0===a.length?null:new w(a,0,a.length)}function w(a,b,d){this.d=a;this.b=b;this.length=d}function O(a,b){return a===b}function P(a){return a}
function e(a){return 1===arguments.length?a:a.bind.apply(a,arguments)}var S=Array.prototype.concat,U=Array.prototype.join,V=Array.prototype.map,W=Array.prototype.reduce,X=Array.prototype.reduceRight,i=e(e,P);w.prototype.j=function(){return this.d[this.b]};w.prototype.l=function(){return this.b+1===this.length?null:new w(this.d,this.b+1,this.length)};var j;j=function(a,b){return Object.freeze({line:a,column:b,toString:T})};j.k=function(a,b){return"\n"===b?j(a.c+1,1):j(a.c,a.g+1)};h.prototype=Error();
Object.defineProperties(h.prototype,{message:{get:function(){var a=this.m;return"At position:"+this.a+" ["+(a?U.call(a,", "):"")+"]"}},messages:{get:function(){return this.e}}});y.prototype=new h;Object.defineProperty(y.prototype,"messages",{get:function(){return[this.h.n,this.i.message]}});B.prototype=new h;t.prototype=new h;A.prototype=new h;var K=L(i,function(a){return function(){throw a;}}),Y=L(i(i(!0)),i(i(!1))),C=i(function(a,b,d,f,c){return c(new B(a.a))}),Z=i(function(a,b,d,f,c){return!a.input?
f(null,a):c(new A(a.a,"end of input"))}),$=e(I,P),m=q([]),u;u=function(a){function b(b,f,c,e,g){return k(a,[b,f,c,Q,g])}return z(function(a){return F(g(b,e(l,a)))})};var aa=x(i(!0));return{ParseError:h,UnknownError:B,UnexpectError:t,ExpectError:A,InputState:s,Position:j,Parser:M,RecParser:z,NamedRecParser:function(a,b){return M(a,z(b))},runParser:K,runStream:J,run:function(a,b){return J(a,N(b))},test:function(a,b){return Y(a,s(N(b),j(1,1)))},always:q,never:C,bind:g,eof:Z,extract:I,examine:$,attempt:G,
lookahead:function(a){return function(b,d,e,c,g){return k(a,[b,function(a){return c(a,b)},e,c,g])}},next:n,either:p,sequence:function(){return X.call(arguments,R,m)},many:u,many1:function(a){return g(a,e(l,u(a)))},times:v,optional:function(a){return p(v(1,a),m)},betweenTimes:function(a,b,d){return b<a?C:g(v(a,d),e(H,E(b-a,d)))},between:function(a,b,d){var f=e(n,b);return n(a,g(d,function(){return f(q.apply(void 0,arguments))}))},sepBy1:D,sepBy:function(a,b){return p(D(a,b),m)},choice:function(){return 0===
arguments.length?C:W.call(arguments,p)},token:x,anyToken:aa,character:function(a,b){return r(b||O,a)},string:function(a,b){return V.call(a,e(r,b||O)).concat(q(a)).reduce(n)}}});
