("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return l(function(b){return a.toString()===b.toString()})}function l(a){return function(b,d,e,c,n){e=b.b;return b.input?(c=b.input.h(),a(c)?d(c,r(b.input.i(),j.e(e,c))):n(s(t,e,"token:'"+c+"'"))):n(s(t,e,"end of input"))}}function H(a,b){return 0>=a?v:w(i(b,h(u,H(a-1,b))))}function Y(a){return p([a])}function x(a,b){return 0>=a?v:i(b,h(u,x(a-1,b)))}function Z(){throw Error("Many parser applied to a parser that accepts an empty string");
}function w(a){return y(I(a),v)}function u(a,b){return J(a,[b])}function J(a,b){return i(a,z(p,K.bind(b)))}function y(a,b){return function(d,e,c,n,f){return k(a,d,e,c,n,function(a){return k(b,d,e,c,n,function(b){return f(g.f,a,b)})})}}function L(a,b){return i(a,f(b))}function I(a){return function(b,d,e,c,f){return k(a,b,d,f,c,f)}}function M(a){return function(b,d,e,c){return c(a(b),b)}}function i(a,b){return function(d,e,c,f,g){return k(a,d,function(a,d){return k(b(a),d,e,c,e,c)},c,function(a,d){return k(b(a),
d,e,c,f,g)},g)}}function p(a){return function(b,d,e,c){return c(a,b)}}function N(a,b){return A(a,r(b,j(1,1)))}function O(a){return function(){throw a.apply(void 0,P.call(arguments,1));}}function Q(a){var b;return b=a(function(){return b.apply(this,arguments)})}function B(a,b){g.call(this,a,["Expected "+(b||"")])}function t(a,b){g.call(this,a,["Unexpected "+(b||"")])}function C(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.b=a;this.message="At position:"+a+" ["+(b?$.call(b,", "):"")+"]"}
function R(a,b){this.c=a;this.d=b}function r(a,b){return Object.freeze({input:a,pos:b})}function S(a){return function(){for(var b=a;b&&b.g;)b=b();return b}}function T(a,b){return b===a.length?null:Object.freeze({first:f(a[b]),rest:D(T,a,b+1)})}function z(a,b){return function(){return a(b.apply(void 0,arguments))}}function U(a){return a}var K=Array.prototype.concat,$=Array.prototype.join,aa=Array.prototype.map,P=Array.prototype.slice,ba=Array.prototype.reduce,m=RegExp.prototype.test,h,D;h=D=function(a){var b=
P.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))};var f=h(h,U),s=z(function(a){return function(){return new a}},h),E;E=function(a){return void 0===a?null:T(a,0)};var k=z(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},D),j;R.prototype.toString=function(){return"{line: "+this.c+" col: "+this.d+"}"};j=function(a,b){return Object.freeze(new R(a,b))};j.e=function(a,b){return"\n"===b?j(a.c+1,1):j(a.c,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.b,
a.a?K.apply(a.a,b.a):b.a)};C.prototype=new g;t.prototype=new g;B.prototype=new g;var A;A=function(a,b){return S(a(b,f,O,f,O))()()};var V,W=f(f(!0)),X=f(f(!1));V=function(a,b){return S(a(b,W,X,W,X))()()};var F=f(function(a,b,d,e,c){return c(s(C,a.b),a)}),ca=f(function(a,b,d,e,c){return!a.input?e(null,a):c(s(B,a.b,"end of input"))}),da=h(M,U),v=p([]),G;G=function(a){function b(b,e,c,f,g){return k(a,b,e,c,Z,g)}return Q(function(a){return w(i(b,h(u,a)))})};var ea=l(f(!0)),fa=l(m.bind(/^.$/)),ga=l(m.bind(/^[a-z]$/i)),
ha=l(m.bind(/^\s$/i)),m=l(m.bind(/^[0-9]$/i));return{ParseError:g,UnknownError:C,UnexpectError:t,ExpectError:B,InputState:r,Position:j,always:p,never:F,bind:i,eof:ca,extract:M,examine:da,attempt:I,lookahead:function(a){return function(b,d,e,c,f){return k(a,b,function(a){return c(a,b)},e,c,f)}},next:L,either:y,many:G,many1:function(a){return i(a,h(u,G(a)))},times:x,optional:function(a){return w(i(a,Y))},betweenTimes:function(a,b,d){return b<a?F:i(x(a,d),h(J,H(b-a,d)))},choice:function(){return 0===
arguments.length?F:ba.call(arguments,y)},token:l,anyToken:ea,"char":q,string:function(a){return aa.call(a,q).concat(p(a)).reduce(L)},anyChar:fa,letter:ga,space:ha,digit:m,Parser:Q,runParser:A,runStream:N,run:function(a,b){return N(a,E(b))},test:function(a,b){var d=E(b);return V(a,r(d,j(1,1)))}}});
