("undefined"!==typeof define?define:function(g){parse=g()})(["stream"],function(g){function G(a,b){return v(m(a,b))}function v(a){return function(b,d,e,c,h){e=b.a;return(c=b.input)?(c=g.k(c),a(c)?d(c,b.next(c)):h(new t(e,"token:'"+c+"'"))):h(new t(e,"end of input"))}}function H(a,b){return n(b,u(w(a,b)))}function R(a,b){return p(b)}function I(a,b){return 0>=a?q:r(x(n(b,I(a-1,b))),q)}function y(a,b){return 0>=a?q:n(b,y(a-1,b))}function S(){throw Error("Many parser applied to a parser that accepts an empty string");
}function T(a,b){return n(b,a)}function n(a,b){return l(a,function(a){return l(b,function(b){return p(g.j(a,b))})})}function r(a,b){return function(d,e,c,h,f){return j(a,[d,e,c,h,function(a){return j(b,[d,e,c,h,function(b){return f(new z(a,b))}])}])}}function w(a,b){return l(a,i(b))}function x(a){return function(b,d,e,c,h){return j(a,[b,d,h,c,h])}}function J(a){return function(b,d,e,c){return c(a(b),b)}}function K(a,b){return l(a,function(a){return b.apply(void 0,g.o(a))})}function l(a,b){return function(d,
e,c,h,f){return j(a,[d,function(a,d){return j(b(a),[d,e,c,e,c])},c,function(a,d){return j(b(a),[d,e,c,h,f])},f])}}function p(a){return function(b,d,e,c){return c(a,b)}}function L(a,b){return M(a,new s(b,k(1,1)))}function N(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.b;)c=c[0].apply(void 0,c[1]);return c()}}function A(a){var b;return b=a(function(){return b.apply(this,arguments)})}function O(a,b){return Object.defineProperty(b,"displayName",{value:a,writable:!1})}function B(a,b){f.call(this,
a,["Expected "+(b||"")])}function t(a,b){f.call(this,a,["Unexpected "+(b||"")])}function C(a){f.call(this,a,["Error"])}function z(a,b){this.f=a;this.g=b;f.call(this,a.a)}function f(a,b){this.d=b;this.a=a}function s(a,b){this.input=a;this.a=b}function U(){return"{line: "+this.c+" col: "+this.e+"}"}function j(a,b){var d=[a,b];d.b=!0;return d}function P(a,b){return a===b}function Q(a){return a}function m(a){return 1===arguments.length?a:a.bind.apply(a,arguments)}var V=Array.prototype.join,W=Array.prototype.map,
X=Array.prototype.reduce,Y=Array.prototype.reduceRight,i=m(m,Q),k;k=function(a,b){return Object.freeze({line:a,column:b,toString:U})};k.i=function(a,b){return"\n"===b?k(a.c+1,1):k(a.c,a.e+1)};s.prototype.next=function(a){return this.b||(this.b=new s(g.n(this.input),k.i(this.a,a)))};f.prototype=Error();Object.defineProperties(f.prototype,{message:{get:function(){var a=this.l;return"At position:"+this.a+" ["+(a?V.call(a,", "):"")+"]"}},messages:{get:function(){return this.d}}});z.prototype=new f;Object.defineProperty(z.prototype,
"messages",{get:function(){return[this.f.m,this.g.message]}});C.prototype=new f;t.prototype=new f;B.prototype=new f;var M=N(i,function(a){return function(){throw a;}}),Z=N(i(i(!0)),i(i(!1))),D=i(function(a,b,d,e,c){return c(new C(a.a))}),$=i(function(a,b,d,e,c){return!a.input?e(null,a):c(new B(a.a,"end of input"))}),aa=m(J,Q),q=p(g.end),E;E=function(){return Y.call(arguments,T,q)};var u;u=function(a){function b(b,e,c,f,g){return j(a,[b,e,c,S,g])}return A(function(a){return r(x(n(b,a)),q)})};var F;
F=function(a,b,d){if(b<a)a=D;else var e=I(b-a,d),a=l(y(a,d),function(a){return l(e,function(b){return p(g.concat(a,b))})});return a};var ba=m(F,0,1),ca=v(i(!0));return{ParseError:f,UnknownError:C,UnexpectError:t,ExpectError:B,InputState:s,Position:k,Parser:O,RecParser:A,NamedRecParser:function(a,b){return O(a,A(b))},runParser:M,runStream:L,run:function(a,b){return L(a,g.h(b))},test:function(a,b){var d=g.h(b);return Z(a,new s(d,k(1,1)))},always:p,never:D,bind:l,binda:K,eof:$,extract:J,examine:aa,attempt:x,
lookahead:function(a){return function(b,d,e,c,f){return j(a,[b,function(a){return c(a,b)},e,c,f])}},next:w,either:r,sequence:E,many:u,many1:function(a){return n(a,u(a))},times:y,optional:ba,betweenTimes:F,between:function(a,b,d){return K(E(a,d,b),R)},sepBy1:H,sepBy:function(a,b){return r(H(a,b),q)},choice:function(){return 0===arguments.length?D:X.call(arguments,r)},token:v,anyToken:ca,character:function(a,b){return G(b||P,a)},string:function(a,b){return W.call(a,m(G,b||P)).concat(p(a)).reduce(w)}}});
