("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return l(function(b){return a.toString()===b.toString()})}function l(a){return function(b,d,e,c,n){e=b.b;return b.input?(c=b.input.g(),a(c)?d(c,r(b.input.h(),j.e(e,c))):n(new s(e,"token:'"+c+"'"))):n(new s(e,"end of input"))}}function E(a,b){return 0>=a?u:v(i(b,g(t,E(a-1,b))))}function V(a){return p([a])}function w(a,b){return 0>=a?u:i(b,g(t,w(a-1,b)))}function W(){throw Error("Many parser applied to a parser that accepts an empty string");
}function v(a){return x(F(a),u)}function t(a,b){return G(a,[b])}function G(a,b){return i(a,H(p,I.bind(b)))}function x(a,b){return function(d,e,c,n,f){return k(a,d,e,c,n,function(a){return k(b,d,e,c,n,function(b){return f(new J(a,b))})})}}function K(a,b){return i(a,f(b))}function F(a){return function(b,d,e,c,f){return k(a,b,d,f,c,f)}}function L(a){return function(b,d,e,c){return c(a(b),b)}}function i(a,b){return function(d,e,c,f,g){return k(a,d,function(a,d){return k(b(a),d,e,c,e,c)},c,function(a,
d){return k(b(a),d,e,c,f,g)},g)}}function p(a){return function(b,d,e,c){return c(a,b)}}function M(a,b){return y(a,r(b,j(1,1)))}function N(a){return function(){throw a;}}function O(a){var b;return b=a(function(){return b.apply(this,arguments)})}function z(a,b){h.call(this,a,["Expected "+(b||"")])}function s(a,b){h.call(this,a,["Unexpected "+(b||"")])}function A(a){h.call(this,a,["Error"])}function J(a,b){return new h(a.b,a.a?I.apply(a.a,b.a):b.a)}function h(a,b){this.a=b;this.b=a;Object.defineProperty(this,
"message",{get:function(){return"At position:"+a+" ["+(b?X.call(b,", "):"")+"]"}})}function Y(){return"{line: "+this.c+" col: "+this.d+"}"}function r(a,b){return Object.freeze({input:a,pos:b})}function P(a){return function(){for(var b=a;b&&b.f;)b=b();return b}}function Q(a,b){return b===a.length?null:Object.freeze({first:f(a[b]),rest:g(Q,a,b+1)})}function H(a,b){return function(){return a(b.apply(void 0,arguments))}}function R(a){return a}function g(a){if(1===arguments.length)return a;var b=[void 0];
Z.apply(b,$.call(arguments,1));return aa.apply(a,b)}var I=Array.prototype.concat,X=Array.prototype.join,ba=Array.prototype.map,$=Array.prototype.slice,Z=Array.prototype.push,ca=Array.prototype.reduce,m=RegExp.prototype.test,aa=Function.prototype.bind,f=g(g,R),B;B=function(a){return void 0===a?null:Q(a,0)};var k=H(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},g),j;j=function(a,b){return Object.freeze({line:a,column:b,toString:Y})};j.e=function(a,b){return"\n"===b?j(a.c+
1,1):j(a.c,a.d+1)};h.prototype=Error();J.prototype=new h;A.prototype=new h;s.prototype=new h;z.prototype=new h;var y;y=function(a,b){return P(a(b,f,N,f,N))()()};var S,T=f(f(!0)),U=f(f(!1));S=function(a,b){return P(a(b,T,U,T,U))()()};var C=f(function(a,b,d,e,c){return c(new A(a.b))}),da=f(function(a,b,d,e,c){return!a.input?e(null,a):c(new z(a.b,"end of input"))}),ea=g(L,R),u=p([]),D;D=function(a){function b(b,e,c,f,g){return k(a,b,e,c,W,g)}return O(function(a){return v(i(b,g(t,a)))})};var fa=l(f(!0)),
ga=l(m.bind(/^.$/)),ha=l(m.bind(/^[a-z]$/i)),ia=l(m.bind(/^\s$/i)),m=l(m.bind(/^[0-9]$/i));return{ParseError:h,UnknownError:A,UnexpectError:s,ExpectError:z,InputState:r,Position:j,always:p,never:C,bind:i,eof:da,extract:L,examine:ea,attempt:F,lookahead:function(a){return function(b,d,e,c,f){return k(a,b,function(a){return c(a,b)},e,c,f)}},next:K,either:x,many:D,many1:function(a){return i(a,g(t,D(a)))},times:w,optional:function(a){return v(i(a,V))},betweenTimes:function(a,b,d){return b<a?C:i(w(a,d),
g(G,E(b-a,d)))},choice:function(){return 0===arguments.length?C:ca.call(arguments,x)},token:l,anyToken:fa,"char":q,string:function(a){return ba.call(a,q).concat(p(a)).reduce(K)},anyChar:ga,letter:ha,space:ia,digit:m,Parser:O,runParser:y,runStream:M,run:function(a,b){return M(a,B(b))},test:function(a,b){var d=B(b);return S(a,r(d,j(1,1)))}}});
