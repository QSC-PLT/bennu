("undefined"!==typeof define?define:function(g){parse=g()})(["stream"],function(g){function F(a,b){return v(f(a,b))}function v(a){return function(b,e,h,c,d){h=b.a;return(c=b.input)?(c=g.l(c),a(c)?e(c,b.next(c)):d(new r(h,"token:'"+c+"'"))):d(new r(h,"end of input"))}}function G(a,b){return s(d(b,f(n,t(w(a,b)))))}function S(a,b){return m(b)}function H(a,b){return 0>=a?p:I(d(b,f(n,H(a-1,b))))}function x(a,b){return 0>=a?p:d(b,f(n,x(a-1,b)))}function T(){throw Error("Many parser applied to a parser that accepts an empty string");
}function U(a,b){return d(b,f(n,a))}function s(a){return d(a,function(a){return m(g.j(a))})}function I(a){return u(J(a),p)}function n(a,b){return d(a,function(a){return m(g.k(b,a))})}function u(a,b){return function(e,h,c,d,f){return k(a,[e,h,c,d,function(a){return k(b,[e,h,c,d,function(b){return f(new y(a,b))}])}])}}function w(a,b){return d(a,j(b))}function J(a){return function(b,e,h,c,d){return k(a,[b,e,d,c,d])}}function K(a){return function(b,e,h,c){return c(a(b),b)}}function L(a,b){return d(a,
V.bind(b,void 0))}function d(a,b){return function(e,h,c,d,f){return k(a,[e,function(a,e){return k(b(a),[e,h,c,h,c])},c,function(a,e){return k(b(a),[e,h,c,d,f])},f])}}function m(a){return function(b,e,d,c){return c(a,b)}}function M(a,b){return N(a,new q(b,l(1,1)))}function O(a,b){return function(e,d){for(var c=e(d,a,b,a,b);c&&c.b;)c=c[0].apply(void 0,c[1]);return c()}}function z(a){var b;return b=a(function(){return b.apply(this,arguments)})}function P(a,b){return Object.defineProperty(b,"displayName",
{value:a,writable:!1})}function A(a,b){i.call(this,a,["Expected "+(b||"")])}function r(a,b){i.call(this,a,["Unexpected "+(b||"")])}function B(a){i.call(this,a,["Error"])}function y(a,b){this.f=a;this.g=b;i.call(this,a.a)}function i(a,b){this.d=b;this.a=a}function q(a,b){this.input=a;this.a=b}function W(){return"{line: "+this.c+" col: "+this.e+"}"}function k(a,b){var e=[a,b];e.b=!0;return e}function Q(a,b){return a===b}function R(a){return a}function f(a){return 1===arguments.length?a:a.bind.apply(a,
arguments)}var X=Array.prototype.join,Y=Array.prototype.map,Z=Array.prototype.reduce,$=Array.prototype.reduceRight,V=Function.prototype.apply,j=f(f,R),l;l=function(a,b){return Object.freeze({line:a,column:b,toString:W})};l.i=function(a,b){return"\n"===b?l(a.c+1,1):l(a.c,a.e+1)};q.prototype.next=function(a){return this.b||(this.b=new q(g.o(this.input),l.i(this.a,a)))};i.prototype=Error();Object.defineProperties(i.prototype,{message:{get:function(){var a=this.m;return"At position:"+this.a+" ["+(a?X.call(a,
", "):"")+"]"}},messages:{get:function(){return this.d}}});y.prototype=new i;Object.defineProperty(y.prototype,"messages",{get:function(){return[this.f.n,this.g.message]}});B.prototype=new i;r.prototype=new i;A.prototype=new i;var N=O(j,function(a){return function(){throw a;}}),aa=O(j(j(!0)),j(j(!1))),C=j(function(a,b,e,d,c){return c(new B(a.a))}),ba=j(function(a,b,e,d,c){return!a.input?d(null,a):c(new A(a.a,"end of input"))}),ca=f(K,R),p=m(g.end),D;D=function(){return $.call(arguments,U,p)};var t;
t=function(a){function b(b,d,c,f,g){return k(a,[b,d,c,T,g])}return z(function(a){return I(d(b,f(n,a)))})};var E;E=function(a,b,e){return b<a?C:d(x(a,e),function(f){return d(H(b-a,e),function(a){return m(g.j(g.concat(f,a)))})})};var da=f(E,0,1),ea=v(j(!0));return{ParseError:i,UnknownError:B,UnexpectError:r,ExpectError:A,InputState:q,Position:l,Parser:P,RecParser:z,NamedRecParser:function(a,b){return P(a,z(b))},runParser:N,runStream:M,run:function(a,b){return M(a,g.h(b))},test:function(a,b){var d=g.h(b);
return aa(a,new q(d,l(1,1)))},always:m,never:C,bind:d,binda:L,eof:ba,extract:K,examine:ca,attempt:J,lookahead:function(a){return function(b,d,f,c,g){return k(a,[b,function(a){return c(a,b)},f,c,g])}},next:w,either:u,sequence:D,many:function(a){return s(t(a))},many1:function(a){return s(d(a,f(n,t(a))))},times:function(a,b){return s(x(a,b))},optional:da,betweenTimes:E,between:function(a,b,d){return L(D(a,d,b),S)},sepBy1:G,sepBy:function(a,b){return u(G(a,b),p)},choice:function(){return 0===arguments.length?
C:Z.call(arguments,u)},token:v,anyToken:ea,character:function(a,b){return F(b||Q,a)},string:function(a,b){return Y.call(a,f(F,b||Q)).concat(m(a)).reduce(w)}}});
