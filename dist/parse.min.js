("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return function(){throw a;}}function A(a){return j(g(I,a))}function j(a){return function(b,d,e,c,h){e=b.c;c=b.h();return void 0===c?h(new r(e,"end of input")):a(c)?d(c,B(b.i(),k.e(e,c))):h(new r(e,"token:'"+c+"'"))}}function C(a,b){return 0>=a?l([]):function(d,e,c,h,f){return i(b,d,function(d,h){function g(a,b){return e(s.apply(d,a),b)}return i(C(a-1,b),h,g,c,g,f)},c,function(b,c){for(var e=[],d=0;d<a;++d)e[d]=b;
return h(e,c)},f)}}function K(){throw Error("Many parser applied to a parser that accepts an empty string");}function t(a,b){return function(d,e,c,h,J){return i(a,d,e,c,h,function(a){a=u(J,g(f.f,a));return i(b,d,e,c,h,a)})}}function D(a,b){return m(a,p(b))}function E(a){return function(b,d,e,c){return c(a(b),b)}}function m(a,b){return function(d,e,c,h,f){return i(a,d,function(a,d){return i(b(a),d,e,c,e,c)},c,function(a,d){return i(b(a),d,e,c,h,f)},f)}}function l(a){return function(b,d,e,c){return c(a,
b)}}function v(a,b){f.call(this,a,["Expected "+(b||"")])}function r(a,b){f.call(this,a,["Unexpected "+(b||"")])}function w(a){f.call(this,a,["Error"])}function f(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?L.call(b,", "):"")+"]"}function F(a,b){this.b=a;this.d=b}function B(a,b){return Object.create(Object.prototype,{input:{value:a,writable:!1},first:{value:g(M,a)},rest:{value:g(N,a)},pos:{value:b,writable:!1}})}function i(a){var b=x.call(arguments,1);return Object.create(Object.prototype,
{_ret:{value:function(){return a.apply(void 0,b)},writable:!1}})}function N(a){return x.call(a,1)}function M(a){return a[0]}function u(a,b){return function(){return a(b.apply(void 0,arguments))}}function I(a,b){return a===b}function p(a){return g(G,a)}function G(a){return a}function g(a){return Function.prototype.bind.apply(a,[void 0].concat(x.call(arguments,1)))}var s=Array.prototype.concat,L=Array.prototype.join,O=Array.prototype.map,x=Array.prototype.slice,P=Array.prototype.reduce,n=RegExp.prototype.test,
k;F.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};k=function(a,b){return Object.freeze(new F(a,b))};k.e=function(a,b){return"\n"===b?k(a.b+1,1):k(a.b,a.d+1)};f.prototype=Error();f.f=function(a,b){return new f(a.c,a.a?s.apply(a.a,b.a):b.a)};w.prototype=new f;r.prototype=new f;v.prototype=new f;var H=p(function(a,b,d,e,c){return c(new w(a),a)}),Q=p(function(a,b,d,e,c){return!1==a.input?e(null,a):c(new v(a.c,"end of input"))}),R=g(E,G),y,S=l([]);y=function(a){var b=t(m(function(b,
e,c,f,g){return i(a,b,e,c,K,g)},function(a){return m(b,u(l,s.bind([a])))}),S);return b};var T=g(j,n.bind(/^.$/)),U=g(j,n.bind(/^[a-z]$/i)),V=g(j,n.bind(/^\s$/i)),n=g(j,n.bind(/^[0-9]$/i)),z;z=function(a,b){var d=i(a,b,p,q,p,q);return function(){for(var a=d;a&&a.hasOwnProperty("_ret");)a=a.g();return a}};return{ParseError:f,UnknownError:w,UnexpectError:r,ExpectError:v,always:l,never:H,bind:m,eof:Q,extract:E,examine:R,attempt:function(a){return function(b,d,e,c,f){return i(a,b,d,f,c,f)}},lookahead:function(a){return function(b,
d,e,c,f){return i(a,b,function(a){return c(a,b)},e,c,f)}},next:D,either:t,many:y,many1:function(a){return m(a,function(b){return m(y(a),u(l,s.bind([b])))})},times:C,choice:function(){return 0===arguments.length?H:P.call(arguments,t)},token:j,"char":A,string:function(a){return O.call(a,A).concat(l(a)).reduce(D)},anyChar:T,letter:U,space:V,digit:n,runParser:z,run:function(a,b){return z(a,B(b,k(1,1)))()()}}});
