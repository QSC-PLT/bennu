("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a){return function(){throw a;}}function B(a){return m(function(b){return a===b.toString()})}function m(a){return function(b,f,d,c,j){d=b.c;return b.input?(c=b.input.h(),a(c)?f(c,C(b.input.i(),n.e(d,c))):j(new s(d,"token:'"+c+"'"))):j(new s(d,"end of input"))}}function K(){throw Error("Many parser applied to a parser that accepts an empty string");}function u(a,b){return function(f,d,c,j,e){return h(a,f,d,c,j,function(a){a=
k(e,p(g.f,a));return h(b,f,d,c,j,a)})}}function D(a,b){return i(a,e(b))}function E(a){return function(b,f,d,c){return c(a(b),b)}}function i(a,b){return function(f,d,c,j,e){return h(a,f,function(a,f){return h(b(a),f,d,c,d,c)},c,function(a,f){return h(b(a),f,d,c,j,e)},e)}}function l(a){return function(b,f,d,c){return c(a,b)}}function v(a,b){g.call(this,a,["Expected "+(b||"")])}function s(a,b){g.call(this,a,["Unexpected "+(b||"")])}function w(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=
a;this.message="At position:"+a+" ["+(b?L.call(b,", "):"")+"]"}function F(a,b){this.b=a;this.d=b}function C(a,b){return Object.freeze({input:a,pos:b})}function G(a,b){return b===a.length?null:Object.freeze({first:e(a[b]),rest:x(G,a,b+1)})}function k(a,b){return function(){return a(b.apply(void 0,arguments))}}function H(a){return a}var t=Array.prototype.concat,L=Array.prototype.join,M=Array.prototype.map,N=Array.prototype.slice,O=Array.prototype.reduce,q=RegExp.prototype.test,p,x;p=x=function(a){var b=
N.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))};var e=p(p,H),I;I=function(a){return void 0===a?null:G(a,0)};var h=k(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},x),P=p(k,function(a){return function(){for(var b=a;b&&b.g;)b=b();return b}}),n;F.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};n=function(a,b){return Object.freeze(new F(a,b))};n.e=function(a,b){return"\n"===b?n(a.b+1,1):n(a.b,a.d+1)};g.prototype=Error();
g.f=function(a,b){return new g(a.c,a.a?t.apply(a.a,b.a):b.a)};w.prototype=new g;s.prototype=new g;v.prototype=new g;var J=e(function(a,b,f,d,c){return c(new w(a),a)}),Q=e(function(a,b,f,d,c){return!a.input?d(null,a):c(new v(a.c,"end of input"))}),R=p(E,H),y,S=l([]);y=function(a){var b=u(i(function(b,d,c,e,g){return h(a,b,d,c,K,g)},function(a){return i(b,k(l,t.bind([a])))}),S);return b};var z,T=l([]);z=function(a,b){return 0>=a?T:i(b,function(f){return i(z(a-1,b),k(l,t.bind([f])))})};var U=e(m(q.bind(/^.$/))),
V=e(m(q.bind(/^[a-z]$/i))),W=e(m(q.bind(/^\s$/i))),q=e(m(q.bind(/^[0-9]$/i))),A;A=P(function(a,b){return h(a,b,e,r,e,r)});var X=k(function(a){return a()()},function(a,b){return A(a,C(b,n(1,1)))});return{ParseError:g,UnknownError:w,UnexpectError:s,ExpectError:v,always:l,never:J,bind:i,eof:Q,extract:E,examine:R,attempt:function(a){return function(b,f,d,c,e){return h(a,b,f,e,c,e)}},lookahead:function(a){return function(b,e,d,c,g){return h(a,b,function(a){return c(a,b)},d,c,g)}},next:D,either:u,many:y,
many1:function(a){return i(a,function(b){return i(y(a),k(l,t.bind([b])))})},times:z,choice:function(){return 0===arguments.length?J:O.call(arguments,u)},token:m,"char":B,string:function(a){return M.call(a,B).concat(l(a)).reduce(D)},anyChar:U,letter:V,space:W,digit:q,Parser:function(a){var b;return b=a(function(){return b.apply(this,arguments)})},runParser:A,run:function(a,b){return X(a,I(b))}}});
