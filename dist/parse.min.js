("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a,b){return G(a,H(b))}function G(a,b){return t(a,u(b,k(1,1)))}function I(a){return function(){throw a;}}function J(a){return m(function(b){return a.toString()===b.toString()})}function m(a){return function(b,d,e,c,h){e=b.c;return b.input?(c=b.input.h(),a(c)?d(c,u(b.input.i(),k.e(e,c))):h(new r(e,"token:'"+c+"'"))):h(new r(e,"end of input"))}}function K(a,b,d){var e=v(a,d);return b===a?e:i(e,function(c){return i(w(K(1,
b-a,d)),function(a){return n(x.apply(c,a))})})}function R(a){return n([a])}function v(a,b){return 0>=a?y:i(b,l(z,v(a-1,b)))}function S(){throw Error("Many parser applied to a parser that accepts an empty string");}function z(a,b){return i(a,A(n,x.bind([b])))}function s(a,b){return function(d,e,c,h,f){return j(a,d,e,c,h,function(a){a=A(f,l(g.f,a));return j(b,d,e,c,h,a)})}}function L(a,b){return i(a,f(b))}function M(a){return function(b,d,e,c,h){return j(a,b,d,h,c,h)}}function N(a){return function(b,
d,e,c){return c(a(b),b)}}function i(a,b){return function(d,e,c,h,f){return j(a,d,function(a,d){return j(b(a),d,e,c,e,c)},c,function(a,d){return j(b(a),d,e,c,h,f)},f)}}function n(a){return function(b,d,e,c){return c(a,b)}}function B(a,b){g.call(this,a,["Expected "+(b||"")])}function r(a,b){g.call(this,a,["Unexpected "+(b||"")])}function C(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?T.call(b,", "):"")+"]"}function O(a,b){this.b=a;this.d=b}function u(a,
b){return Object.freeze({input:a,pos:b})}function P(a,b){return b===a.length?null:Object.freeze({first:f(a[b]),rest:D(P,a,b+1)})}function A(a,b){return function(){return a(b.apply(void 0,arguments))}}function Q(a){return a}var x=Array.prototype.concat,T=Array.prototype.join,U=Array.prototype.map,V=Array.prototype.slice,W=Array.prototype.reduce,p=RegExp.prototype.test,l,D;l=D=function(a){var b=V.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))};var f=l(l,Q),H;H=function(a){return void 0===
a?null:P(a,0)};var j=A(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},D),k;O.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};k=function(a,b){return Object.freeze(new O(a,b))};k.e=function(a,b){return"\n"===b?k(a.b+1,1):k(a.b,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?x.apply(a.a,b.a):b.a)};C.prototype=new g;r.prototype=new g;B.prototype=new g;var E=f(function(a,b,d,e,c){return c(new C(a),a)}),X=f(function(a,b,d,e,c){return!a.input?
e(null,a):c(new B(a.c,"end of input"))}),Y=l(N,Q),y=n([]),F;F=function(a){var b;return b=s(i(function(b,e,c,f,g){return j(a,b,e,c,S,g)},function(a){return z(b,a)}),y)};var w;w=function(a){return s(M(i(a,R)),y)};var Z=f(m(p.bind(/^.$/))),$=f(m(p.bind(/^[a-z]$/i))),aa=f(m(p.bind(/^\s$/i))),p=f(m(p.bind(/^[0-9]$/i))),t;t=function(a,b){for(var d=a(b,f,I,f,I);d&&d.g;)d=d();return d()};return{ParseError:g,UnknownError:C,UnexpectError:r,ExpectError:B,InputState:u,Position:k,always:n,never:E,bind:i,eof:X,
extract:N,examine:Y,attempt:M,lookahead:function(a){return function(b,d,e,c,f){return j(a,b,function(a){return c(a,b)},e,c,f)}},next:L,either:s,many:F,many1:function(a){return i(a,l(z,F(a)))},times:v,optional:w,betweenTimes:function(a,b,d){return b<a?E():K(a,b,d)},choice:function(){return 0===arguments.length?E:W.call(arguments,s)},token:m,"char":J,string:function(a){return U.call(a,J).concat(n(a)).reduce(L)},anyChar:Z,letter:$,space:aa,digit:p,Parser:function(a){var b;return b=a(function(){return b.apply(this,
arguments)})},runParser:t,runStream:G,run:q,test:function(a,b){try{return q(a,b),!0}catch(d){return!1}}}});
