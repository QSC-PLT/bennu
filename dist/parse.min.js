("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return k(function(b){return a.toString()===b.toString()})}function k(a){return function(b,d,e,c,n){e=b.a;return b.input?(c=b.input.i(),a(c)?d(c,r(b.input.l(),i.j(e,c))):n(new s(e,"token:'"+c+"'"))):n(new s(e,"end of input"))}}function G(a,b){return 0>=a?w:x(g(b,h(t,G(a-1,b))))}function Q(a){return l([a])}function y(a,b){return 0>=a?w:g(b,h(t,y(a-1,b)))}function R(){throw Error("Many parser applied to a parser that accepts an empty string");
}function x(a){return z(H(a),w)}function t(a,b){return I(a,[b])}function I(a,b){var d=S.bind(b);return g(a,function(){return l(d.apply(void 0,arguments))})}function z(a,b){return function(d,e,c,n,f){return p(a,d,e,c,n,function(a){return b(d,e,c,n,function(b){return f(new A(a,b))})})}}function u(a,b){return g(a,j(b))}function H(a){return function(b,d,e,c,f){return p(a,b,d,f,c,f)}}function J(a){return function(b,d,e,c){return c(a(b),b)}}function g(a,b){return function(d,e,c,f,g){return p(a,d,function(a,
d){return b(a)(d,e,c,e,c)},c,function(a,d){return b(a)(d,e,c,f,g)},g)}}function l(a){return function(b,d,e,c){return c(a,b)}}function K(a,b){return L(a,r(b,i(1,1)))}function M(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.e;)c=c();return c()}}function B(a){var b;return b=a(function(){return b.apply(this,arguments)})}function N(a,b){return Object.defineProperty(b,"displayName",{value:a,writable:!1})}function C(a,b){f.call(this,a,["Expected "+(b||"")])}function s(a,b){f.call(this,a,["Unexpected "+
(b||"")])}function D(a){f.call(this,a,["Error"])}function A(a,b){this.g=a;this.h=b;f.call(this,a.a)}function f(a,b){this.k=b;this.a=a}function T(){return"{line: "+this.c+" col: "+this.f+"}"}function r(a,b){return Object.freeze({input:a,pos:b})}function p(){var a=h.apply(void 0,arguments);a.e=!0;return a}function O(a){return void 0===a||0===a.length?null:new v(a,0,a.length)}function v(a,b,d){this.d=a;this.b=b;this.length=d}function P(a){return a}function h(a){return 1===arguments.length?a:U.apply(a,
arguments)}var S=Array.prototype.concat,V=Array.prototype.join,W=Array.prototype.map,X=Array.prototype.reduce,m=RegExp.prototype.test,U=Function.prototype.bind,j=h(h,P);v.prototype.i=function(){return this.d[this.b]};v.prototype.l=function(){return this.b+1===this.length?null:new v(this.d,this.b+1,this.length)};var i;i=function(a,b){return Object.freeze({line:a,column:b,toString:T})};i.j=function(a,b){return"\n"===b?i(a.c+1,1):i(a.c,a.f+1)};f.prototype=Error();Object.defineProperty(f.prototype,"message",
{get:function(){var a=this.k;return"At position:"+this.a+" ["+(a?V.call(a,", "):"")+"]"}});A.prototype=new f;Object.defineProperty(A.prototype,"messages",{get:function(){return[this.g.m,this.h.message]}});D.prototype=new f;s.prototype=new f;C.prototype=new f;var L=M(function(a){return function(){return a}},function(a){return function(){throw a;}}),Y=M(j(j(!0)),j(j(!1))),E=j(function(a,b,d,e,c){return c(new D(a.a))}),Z=j(function(a,b,d,e,c){return!a.input?e(null,a):c(new C(a.a,"end of input"))}),$=
h(J,P),w=l([]),F;F=function(a){function b(b,e,c,f,g){return p(a,b,e,c,R,g)}return B(function(a){return x(g(b,h(t,a)))})};var aa=k(j(!0)),ba=k(m.bind(/^.$/)),ca=k(m.bind(/^[a-z]$/i)),da=k(m.bind(/^\s$/i)),m=k(m.bind(/^[0-9]$/i));return{ParseError:f,UnknownError:D,UnexpectError:s,ExpectError:C,InputState:r,Position:i,Parser:N,RecParser:B,NamedRecParser:function(a,b){return N(a,B(b))},runParser:L,runStream:K,run:function(a,b){return K(a,O(b))},test:function(a,b){return Y(a,r(O(b),i(1,1)))},always:l,
never:E,bind:g,eof:Z,extract:J,examine:$,attempt:H,lookahead:function(a){return function(b,d,e,c,f){return p(a,b,function(a){return c(a,b)},e,c,f)}},next:u,either:z,many:F,many1:function(a){return g(a,h(t,F(a)))},times:y,optional:function(a){return x(g(a,Q))},betweenTimes:function(a,b,d){return b<a?E:g(y(a,d),h(I,G(b-a,d)))},between:function(a,b,d){return u(a,g(d,function(a){return u(b,l(a))}))},choice:function(){return 0===arguments.length?E:X.call(arguments,z)},token:k,anyToken:aa,"char":q,string:function(a){return W.call(a,
q).concat(l(a)).reduce(u)},anyChar:ba,letter:ca,space:da,digit:m}});
