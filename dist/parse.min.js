("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a){return function(){throw a;}}function y(a){return j(h(H,a))}function j(a){return function(b,d,e,c,i){e=b.input;b=b.c;c=e[0];return void 0===c?i(new s(b,"end of input")):a(c)?d(c,z(A.call(e,1),k.e(b,c))):i(new s(b,"token:'"+c+"'"))}}function B(a,b){return 0>=a?l([]):function(d,e,c,i,f){return b(d,function(d,i){function h(a,b){return e(p.apply(d,a),b)}return B(a-1,b)(i,h,c,h,f)},c,function(b,c){for(var e=[],d=0;d<a;++d)e[d]=
b;return i(e,c)},f)}}function I(){throw Error("Many parser applied to a parser that accepts an empty string");}function u(a,b){return function(d,e,c,i,h){return a(d,e,c,i,function(a){return b(d,e,c,i,function(b){return h(f.f(a,b))})})}}function C(a,b){return m(a,q(b))}function D(a){return function(b,d,e,c){return c(a(b),b)}}function m(a,b){return function(d,e,c,i,f){return a(d,function(a,d){return b(a)(d,e,c,e,c)},c,function(a,d){return b(a)(d,e,c,i,f)},f)}}function l(a){return function(b,d,e,c){return c(a,
b)}}function v(a,b){f.call(this,a,["Expected "+(b||"")])}function s(a,b){f.call(this,a,["Unexpected "+(b||"")])}function w(a){f.call(this,a,["Error"])}function f(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?J.call(b,", "):"")+"]"}function E(a,b){this.b=a;this.d=b}function z(a,b){return Object.create(Object.prototype,{input:{value:a,writable:!1},pos:{value:b,writable:!1}})}function H(a,b){return a===b}function q(a){return h(F,a)}function F(a){return a}function h(a){return Function.prototype.bind.apply(a,
[void 0].concat(A.call(arguments,1)))}var p=Array.prototype.concat,J=Array.prototype.join,K=Array.prototype.map,A=Array.prototype.slice,L=Array.prototype.reduce,n=RegExp.prototype.test,k;E.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};k=function(a,b){return Object.freeze(new E(a,b))};k.e=function(a,b){return"\n"===b?k(a.b+1,1):k(a.b,a.d+1)};f.prototype=Error();f.f=function(a,b){return new f(a.c,a.a?p.apply(a.a,b.a):b.a)};w.prototype=new f;s.prototype=new f;v.prototype=
new f;var G=q(function(a,b,d,e,c){return c(new w(a),a)}),M=q(function(a,b,d,e,c){window.g=a.input;return!1==a.input?e(null,a):c(new v(a.c,"end of input"))}),N=h(D,F),t;t=function(a){function b(b,e,c,f,h){return a(b,e,c,I,h)}return u(m(b,function(a){return m(t(b),function(b){return l(p.apply([a],b))})}),l([]))};var O=h(j,n.bind(/^.$/)),P=h(j,n.bind(/^[a-z]$/i)),Q=h(j,n.bind(/^\s$/i)),n=h(j,n.bind(/^[0-9]$/i)),x;x=function(a,b){return a(b,q,r,q,r)};return{ParseError:f,UnknownError:w,UnexpectError:s,
ExpectError:v,always:l,never:G,bind:m,eof:M,extract:D,examine:N,attempt:function(a){return function(b,d,e,c,f){return a(b,d,f,c,f)}},lookahead:function(a){return function(b,d,e,c,f){return a(b,function(a){return c(a,b)},e,c,f)}},next:C,either:u,many:t,many1:function(a){return m(a,function(b){return m(t(a),function(a){return l(p.apply([b],a))})})},times:B,choice:function(){return 0===arguments.length?G:L.call(arguments,u)},token:j,"char":y,string:function(a){return p.call(K.call(a,y),l(a)).reduce(C)},
anyChar:O,letter:P,space:Q,digit:n,runParser:x,run:function(a,b){return x(a,z(b,k(1,1)))()}}});
