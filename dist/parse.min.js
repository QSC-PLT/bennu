("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a){return l(function(b){return a.toString()===b.toString()})}function l(a){return function(b,d,e,c,p){e=b.b;return b.input?(c=b.input.g(),a(c)?d(c,r(b.input.i(),i.h(e,c))):p(new s(e,"token:'"+c+"'"))):p(new s(e,"end of input"))}}function F(a,b){return 0>=a?w:x(g(b,h(t,F(a-1,b))))}function Q(a){return m([a])}function y(a,b){return 0>=a?w:g(b,h(t,y(a-1,b)))}function R(){throw Error("Many parser applied to a parser that accepts an empty string");
}function x(a){return z(G(a),w)}function t(a,b){return H(a,[b])}function H(a,b){var d=I.bind(b);return g(a,function(){return m(d.apply(void 0,arguments))})}function z(a,b){return function(d,e,c,p,f){return j(a,d,e,c,p,function(a){return j(b,d,e,c,p,function(b){return f(new J(a,b))})})}}function u(a,b){return g(a,k(b))}function G(a){return function(b,d,e,c,f){return j(a,b,d,f,c,f)}}function K(a){return function(b,d,e,c){return c(a(b),b)}}function g(a,b){return function(d,e,c,f,g){return j(a,d,function(a,
d){return j(b(a),d,e,c,e,c)},c,function(a,d){return j(b(a),d,e,c,f,g)},g)}}function m(a){return function(b,d,e,c){return c(a,b)}}function L(a,b){return M(a,r(b,i(1,1)))}function N(a,b){return function(d,e){for(var c=d(e,a,b,a,b);c&&c.j;)c=c();return c()}}function O(a){var b;return b=a(function(){return b.apply(this,arguments)})}function A(a,b){f.call(this,a,["Expected "+(b||"")])}function s(a,b){f.call(this,a,["Unexpected "+(b||"")])}function B(a){f.call(this,a,["Error"])}function J(a,b){return new f(a.b,
a.a?I.apply(a.a,b.a):b.a)}function f(a,b){this.a=b;this.b=a}function S(){return"{line: "+this.d+" col: "+this.f+"}"}function r(a,b){return Object.freeze({input:a,pos:b})}function j(){return Object.defineProperty(h.apply(void 0,arguments),"_next",{value:!0,writable:!1})}function v(a,b,d){this.e=a;this.c=b;this.length=d}function P(a){return a}function h(a){return 1===arguments.length?a:T.apply(a,arguments)}var I=Array.prototype.concat,U=Array.prototype.join,V=Array.prototype.map,W=Array.prototype.reduce,
n=RegExp.prototype.test,T=Function.prototype.bind,k=h(h,P),C;v.prototype.g=function(){return this.e[this.c]};v.prototype.i=function(){return this.c+1===this.length?null:new v(this.e,this.c+1,this.length)};C=function(a){return void 0===a||0===a.length?null:new v(a,0,a.length)};var i;i=function(a,b){return Object.freeze({line:a,column:b,toString:S})};i.h=function(a,b){return"\n"===b?i(a.d+1,1):i(a.d,a.f+1)};f.prototype=Error();Object.defineProperty(f.prototype,"message",{get:function(){return"At position:"+
this.b+" ["+(this.a?U.call(this.a,", "):"")+"]"}});J.prototype=new f;B.prototype=new f;s.prototype=new f;A.prototype=new f;var M=N(function(a){return function(){return a}},function(a){return function(){throw a;}}),X=N(k(k(!0)),k(k(!1))),D=k(function(a,b,d,e,c){return c(new B(a.b))}),Y=k(function(a,b,d,e,c){return!a.input?e(null,a):c(new A(a.b,"end of input"))}),Z=h(K,P),w=m([]),E;E=function(a){function b(b,e,c,f,g){return j(a,b,e,c,R,g)}return O(function(a){return x(g(b,h(t,a)))})};var $=l(k(!0)),
aa=l(n.bind(/^.$/)),ba=l(n.bind(/^[a-z]$/i)),ca=l(n.bind(/^\s$/i)),n=l(n.bind(/^[0-9]$/i));return{ParseError:f,UnknownError:B,UnexpectError:s,ExpectError:A,InputState:r,Position:i,always:m,never:D,bind:g,eof:Y,extract:K,examine:Z,attempt:G,lookahead:function(a){return function(b,d,e,c,f){return j(a,b,function(a){return c(a,b)},e,c,f)}},next:u,either:z,many:E,many1:function(a){return g(a,h(t,E(a)))},times:y,optional:function(a){return x(g(a,Q))},betweenTimes:function(a,b,d){return b<a?D:g(y(a,d),h(H,
F(b-a,d)))},between:function(a,b,d){return u(a,g(d,function(a){return u(b,m(a))}))},choice:function(){return 0===arguments.length?D:W.call(arguments,z)},token:l,anyToken:$,"char":q,string:function(a){return V.call(a,q).concat(m(a)).reduce(u)},anyChar:aa,letter:ba,space:ca,digit:n,Parser:O,runParser:M,runStream:L,run:function(a,b){return L(a,C(b))},test:function(a,b){var d=C(b);return X(a,r(d,i(1,1)))}}});
