("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a){return function(){throw a;}}function A(a){return j(f(I,a))}function j(a){return function(b,e,d,c,h){d=b.c;c=b.h();return void 0===c?h(new s(d,"end of input")):a(c)?e(c,B(b.i(),k.e(d,c))):h(new s(d,"token:'"+c+"'"))}}function C(a,b){return 0>=a?l([]):function(e,d,c,h,f){return i(b,e,function(e,h){function g(a,b){return d(t.apply(e,a),b)}return i(C(a-1,b),h,g,c,g,f)},c,function(b,c){for(var d=[],e=0;e<a;++e)d[e]=b;
return h(d,c)},f)}}function K(){throw Error("Many parser applied to a parser that accepts an empty string");}function u(a,b){return function(e,d,c,h,J){return i(a,e,d,c,h,function(a){a=p(J,f(g.f,a));return i(b,e,d,c,h,a)})}}function D(a,b){return m(a,q(b))}function E(a){return function(b,e,d,c){return c(a(b),b)}}function m(a,b){return function(e,d,c,h,f){return i(a,e,function(a,e){return i(b(a),e,d,c,d,c)},c,function(a,e){return i(b(a),e,d,c,h,f)},f)}}function l(a){return function(b,e,d,c){return c(a,
b)}}function v(a,b){g.call(this,a,["Expected "+(b||"")])}function s(a,b){g.call(this,a,["Unexpected "+(b||"")])}function w(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?L.call(b,", "):"")+"]"}function F(a,b){this.b=a;this.d=b}function B(a,b){return Object.create(Object.prototype,{input:{value:a,writable:!1},first:{value:f(M,a)},rest:{value:f(N,a)},pos:{value:b,writable:!1}})}function i(a){var b=x.call(arguments,1);return Object.create(Object.prototype,
{_ret:{value:function(){return a.apply(void 0,b)},writable:!1}})}function N(a){return x.call(a,1)}function M(a){return a[0]}function p(a,b){return function(){return a(b.apply(void 0,arguments))}}function I(a,b){return a===b}function q(a){return f(G,a)}function G(a){return a}function f(a){return Function.prototype.bind.apply(a,[void 0].concat(x.call(arguments,1)))}var t=Array.prototype.concat,L=Array.prototype.join,O=Array.prototype.map,x=Array.prototype.slice,P=Array.prototype.reduce,n=RegExp.prototype.test,
Q=f(p,function(a){return function(){for(var b=a;b&&b.hasOwnProperty("_ret");)b=b.g();return b}}),k;F.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};k=function(a,b){return Object.freeze(new F(a,b))};k.e=function(a,b){return"\n"===b?k(a.b+1,1):k(a.b,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?t.apply(a.a,b.a):b.a)};w.prototype=new g;s.prototype=new g;v.prototype=new g;var H=q(function(a,b,e,d,c){return c(new w(a),a)}),R=q(function(a,b,e,d,c){return!1==
a.input?d(null,a):c(new v(a.c,"end of input"))}),S=f(E,G),y,T=l([]);y=function(a){var b=u(m(function(b,d,c,f,g){return i(a,b,d,c,K,g)},function(a){return m(b,p(l,t.bind(a)))}),T);return b};var U=f(j,n.bind(/^.$/)),V=f(j,n.bind(/^[a-z]$/i)),W=f(j,n.bind(/^\s$/i)),n=f(j,n.bind(/^[0-9]$/i)),z;z=Q(function(a,b){return i(a,b,q,r,q,r)});return{ParseError:g,UnknownError:w,UnexpectError:s,ExpectError:v,always:l,never:H,bind:m,eof:R,extract:E,examine:S,attempt:function(a){return function(b,e,d,c,f){return i(a,
b,e,f,c,f)}},lookahead:function(a){return function(b,e,d,c,f){return i(a,b,function(a){return c(a,b)},d,c,f)}},next:D,either:u,many:y,many1:function(a){return m(a,function(b){return m(y(a),p(l,t.bind(b)))})},times:C,choice:function(){return 0===arguments.length?H:P.call(arguments,u)},token:j,"char":A,string:function(a){return O.call(a,A).concat(l(a)).reduce(D)},anyChar:U,letter:V,space:W,digit:n,runParser:z,run:p(function(a){return a()()},function(a,b){return z(a,B(b,k(1,1)))})}});
