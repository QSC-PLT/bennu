("undefined"!==typeof define?define:function(q){parse=q()})(function(){function q(a,b){return s(a,t(b,i(1,1)))}function C(a){return function(){throw a;}}function D(a){return l(function(b){return a.toString()===b.toString()})}function l(a){return function(b,d,e,c,j){e=b.c;return b.input?(c=b.input.h(),a(c)?d(c,t(b.input.i(),i.e(e,c))):j(new r(e,"token:'"+c+"'"))):j(new r(e,"end of input"))}}function M(){throw Error("Many parser applied to a parser that accepts an empty string");}function u(a,b){return m(a,
v(p,E.bind([b])))}function w(a,b){return function(d,e,c,j,f){return h(a,d,e,c,j,function(a){a=v(f,k(g.f,a));return h(b,d,e,c,j,a)})}}function F(a,b){return m(a,f(b))}function G(a){return function(b,d,e,c){return c(a(b),b)}}function m(a,b){return function(d,e,c,j,f){return h(a,d,function(a,d){return h(b(a),d,e,c,e,c)},c,function(a,d){return h(b(a),d,e,c,j,f)},f)}}function p(a){return function(b,d,e,c){return c(a,b)}}function x(a,b){g.call(this,a,["Expected "+(b||"")])}function r(a,b){g.call(this,a,
["Unexpected "+(b||"")])}function y(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?N.call(b,", "):"")+"]"}function H(a,b){this.b=a;this.d=b}function t(a,b){return Object.freeze({input:a,pos:b})}function I(a,b){return b===a.length?null:Object.freeze({first:f(a[b]),rest:z(I,a,b+1)})}function v(a,b){return function(){return a(b.apply(void 0,arguments))}}function J(a){return a}var E=Array.prototype.concat,N=Array.prototype.join,O=Array.prototype.map,
P=Array.prototype.slice,Q=Array.prototype.reduce,n=RegExp.prototype.test,k,z;k=z=function(a){var b=P.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))};var f=k(k,J),K;K=function(a){return void 0===a?null:I(a,0)};var h=v(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},z),i;H.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};i=function(a,b){return Object.freeze(new H(a,b))};i.e=function(a,b){return"\n"===b?i(a.b+1,1):i(a.b,
a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?E.apply(a.a,b.a):b.a)};y.prototype=new g;r.prototype=new g;x.prototype=new g;var L=f(function(a,b,d,e,c){return c(new y(a),a)}),R=f(function(a,b,d,e,c){return!a.input?e(null,a):c(new x(a.c,"end of input"))}),S=k(G,J),A,T=p([]);A=function(a){var b;return b=w(m(function(b,e,c,f,g){return h(a,b,e,c,M,g)},function(a){return u(b,a)}),T)};var B,U=p([]);B=function(a,b){return 0>=a?U:m(b,k(u,B(a-1,b)))};var V=f(l(n.bind(/^.$/))),W=f(l(n.bind(/^[a-z]$/i))),
X=f(l(n.bind(/^\s$/i))),n=f(l(n.bind(/^[0-9]$/i))),s;s=function(a,b){for(var d=a(b,f,C,f,C);d&&d.g;)d=d();return d()};return{ParseError:g,UnknownError:y,UnexpectError:r,ExpectError:x,InputState:t,Position:i,always:p,never:L,bind:m,eof:R,extract:G,examine:S,attempt:function(a){return function(b,d,e,c,f){return h(a,b,d,f,c,f)}},lookahead:function(a){return function(b,d,e,c,f){return h(a,b,function(a){return c(a,b)},e,c,f)}},next:F,either:w,many:A,many1:function(a){return m(a,k(u,A(a)))},times:B,choice:function(){return 0===
arguments.length?L:Q.call(arguments,w)},token:l,"char":D,string:function(a){return O.call(a,D).concat(p(a)).reduce(F)},anyChar:V,letter:W,space:X,digit:n,Parser:function(a){var b;return b=a(function(){return b.apply(this,arguments)})},runParser:s,runStream:q,run:function(a,b){return q(a,K(b))}}});
