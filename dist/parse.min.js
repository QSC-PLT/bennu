("undefined"!==typeof define?define:function(s){parse=s()})(function(){function s(a,b){return E(a,F(b))}function E(a,b){return v(a,w(b,k(1,1)))}function G(a){return function(){throw a;}}function H(a){return l(function(b){return a.toString()===b.toString()})}function l(a){return function(b,d,e,c,h){e=b.c;return b.input?(c=b.input.h(),a(c)?d(c,w(b.input.i(),k.e(e,c))):h(new t(e,"token:'"+c+"'"))):h(new t(e,"end of input"))}}function I(a,b){return 0>=a?p:q(f(b,i(u,I(a-1,b))),p)}function R(a){return r([a])}
function x(a,b){return 0>=a?p:f(b,i(u,x(a-1,b)))}function S(){throw Error("Many parser applied to a parser that accepts an empty string");}function u(a,b){return J(a,[b])}function J(a,b){return f(a,y(r,K.bind(b)))}function q(a,b){return function(d,e,c,h,f){return j(a,d,e,c,h,function(a){a=y(f,i(g.f,a));return j(b,d,e,c,h,a)})}}function L(a,b){return f(a,m(b))}function M(a){return function(b,d,e,c,h){return j(a,b,d,h,c,h)}}function N(a){return function(b,d,e,c){return c(a(b),b)}}function f(a,b){return function(d,
e,c,h,f){return j(a,d,function(a,d){return j(b(a),d,e,c,e,c)},c,function(a,d){return j(b(a),d,e,c,h,f)},f)}}function r(a){return function(b,d,e,c){return c(a,b)}}function z(a,b){g.call(this,a,["Expected "+(b||"")])}function t(a,b){g.call(this,a,["Unexpected "+(b||"")])}function A(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message="At position:"+a+" ["+(b?T.call(b,", "):"")+"]"}function O(a,b){this.b=a;this.d=b}function w(a,b){return Object.freeze({input:a,pos:b})}function P(a,
b){return b===a.length?null:Object.freeze({first:m(a[b]),rest:B(P,a,b+1)})}function y(a,b){return function(){return a(b.apply(void 0,arguments))}}function Q(a){return a}var K=Array.prototype.concat,T=Array.prototype.join,U=Array.prototype.map,V=Array.prototype.slice,W=Array.prototype.reduce,n=RegExp.prototype.test,i,B;i=B=function(a){var b=V.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))};var m=i(i,Q),F;F=function(a){return void 0===a?null:P(a,0)};var j=y(function(a){return Object.defineProperty(a,
"_next",{value:!0,writable:!1})},B),k;O.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};k=function(a,b){return Object.freeze(new O(a,b))};k.e=function(a,b){return"\n"===b?k(a.b+1,1):k(a.b,a.d+1)};g.prototype=Error();g.f=function(a,b){return new g(a.c,a.a?K.apply(a.a,b.a):b.a)};A.prototype=new g;t.prototype=new g;z.prototype=new g;var C=m(function(a,b,d,e,c){return c(new A(a),a)}),X=m(function(a,b,d,e,c){return!a.input?e(null,a):c(new z(a.c,"end of input"))}),Y=i(N,Q),p=r([]),
D;D=function(a){var b;return b=q(f(function(b,e,c,f,g){return j(a,b,e,c,S,g)},function(a){return u(b,a)}),p)};var Z=l(m(!0)),$=l(n.bind(/^.$/)),aa=l(n.bind(/^[a-z]$/i)),ba=l(n.bind(/^\s$/i)),n=l(n.bind(/^[0-9]$/i)),v;v=function(a,b){for(var d=a(b,m,G,m,G);d&&d.g;)d=d();return d()};return{ParseError:g,UnknownError:A,UnexpectError:t,ExpectError:z,InputState:w,Position:k,always:r,never:C,bind:f,eof:X,extract:N,examine:Y,attempt:M,lookahead:function(a){return function(b,d,e,c,f){return j(a,b,function(a){return c(a,
b)},e,c,f)}},next:L,either:q,many:D,many1:function(a){return f(a,i(u,D(a)))},times:x,optional:function(a){return q(M(f(a,R)),p)},betweenTimes:function(a,b,d){return b<a?C:f(x(a,d),i(J,I(b-a,d)))},choice:function(){return 0===arguments.length?C:W.call(arguments,q)},token:l,anyToken:Z,"char":H,string:function(a){return U.call(a,H).concat(r(a)).reduce(L)},anyChar:$,letter:aa,space:ba,digit:n,Parser:function(a){var b;return b=a(function(){return b.apply(this,arguments)})},runParser:v,runStream:E,run:s,
test:function(a,b){try{return s(a,b),!0}catch(d){return!1}}}});
