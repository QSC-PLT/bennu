("undefined"!==typeof define?define:function(r){parse=r()})(function(){function r(a){return function(){throw a;}}function A(a){return m(function(b){return a===b.toString()})}function m(a){return function(b,d,e,c,j){e=b.c;return b.e?(c=b.e(),a(c)?d(c,B(b.i(),n.f(e,c))):j(new s(e,"token:'"+c+"'"))):j(new s(e,"end of input"))}}function I(){throw Error("Many parser applied to a parser that accepts an empty string");}function u(a,b){return function(d,e,c,j,f){return h(a,d,e,c,j,function(a){a=k(f,p(g.g,
a));return h(b,d,e,c,j,a)})}}function C(a,b){return i(a,f(b))}function D(a){return function(b,d,e,c){return c(a(b),b)}}function i(a,b){return function(d,e,c,j,f){return h(a,d,function(a,d){return h(b(a),d,e,c,e,c)},c,function(a,d){return h(b(a),d,e,c,j,f)},f)}}function l(a){return function(b,d,e,c){return c(a,b)}}function v(a,b){g.call(this,a,["Expected "+(b||"")])}function s(a,b){g.call(this,a,["Unexpected "+(b||"")])}function w(a){g.call(this,a,["Error"])}function g(a,b){this.a=b;this.c=a;this.message=
"At position:"+a+" ["+(b?J.call(b,", "):"")+"]"}function E(a,b){this.b=a;this.d=b}function B(a,b){return Object.create(Object.prototype,{first:{value:!a||1>a.length?null:function(){return a[0]}},rest:{value:K(a)},pos:{value:b,writable:!1}})}function K(a){return a&&1>=a.length?f(null):function(){return F.call(a,1)}}function k(a,b){return function(){return a(b.apply(void 0,arguments))}}function G(a){return a}function p(a){var b=F.call(arguments,1);return Function.prototype.bind.apply(a,[void 0].concat(b))}
var t=Array.prototype.concat,J=Array.prototype.join,L=Array.prototype.map,F=Array.prototype.slice,M=Array.prototype.reduce,q=RegExp.prototype.test,f=p(p,G),h=k(function(a){return Object.defineProperty(a,"_next",{value:!0,writable:!1})},p),N=p(k,function(a){return function(){for(var b=a;b&&b.h;)b=b();return b}}),n;E.prototype.toString=function(){return"{line: "+this.b+" col: "+this.d+"}"};n=function(a,b){return Object.freeze(new E(a,b))};n.f=function(a,b){return"\n"===b?n(a.b+1,1):n(a.b,a.d+1)};g.prototype=
Error();g.g=function(a,b){return new g(a.c,a.a?t.apply(a.a,b.a):b.a)};w.prototype=new g;s.prototype=new g;v.prototype=new g;var H=f(function(a,b,d,e,c){return c(new w(a),a)}),O=f(function(a,b,d,e,c){return!a.e?e(null,a):c(new v(a.c,"end of input"))}),P=p(D,G),x,Q=l([]);x=function(a){var b=u(i(function(b,e,c,f,g){return h(a,b,e,c,I,g)},function(a){return i(b,k(l,t.bind(a)))}),Q);return b};var y,R=l([]);y=function(a,b){return 0>=a?R:i(b,function(d){return i(y(a-1,b),k(l,t.bind(d)))})};var S=f(m(q.bind(/^.$/))),
T=f(m(q.bind(/^[a-z]$/i))),U=f(m(q.bind(/^\s$/i))),q=f(m(q.bind(/^[0-9]$/i))),z;z=N(function(a,b){return h(a,b,f,r,f,r)});return{ParseError:g,UnknownError:w,UnexpectError:s,ExpectError:v,always:l,never:H,bind:i,eof:O,extract:D,examine:P,attempt:function(a){return function(b,d,e,c,f){return h(a,b,d,f,c,f)}},lookahead:function(a){return function(b,d,e,c,f){return h(a,b,function(a){return c(a,b)},e,c,f)}},next:C,either:u,many:x,many1:function(a){return i(a,function(b){return i(x(a),k(l,t.bind(b)))})},
times:y,choice:function(){return 0===arguments.length?H:M.call(arguments,u)},token:m,"char":A,string:function(a){return L.call(a,A).concat(l(a)).reduce(C)},anyChar:S,letter:T,space:U,digit:q,Parser:function(a,b){var d;return d=b.apply(Object.defineProperty({},a,{value:function(){return d.apply(this,arguments)}}))},runParser:z,run:k(function(a){return a()()},function(a,b){return z(a,B(b,n(1,1)))})}});
