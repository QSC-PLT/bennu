define(["require","exports","parse/parse"],function(k,c,a){var e,l,m,d,n=a.always,h=a.attempt,u=a.choicea,i=a.ExpectError,p=a.next;d=a.Parser;var q=a.token,r=Function.prototype.call.bind(Array.prototype.reduce),v=Function.prototype.call.bind(Array.prototype.reduceRight),s=function(b){return function(f,a){return new i(f,b,null===a?"end of input":a)}},g=function(b,f,a,c,d){i.call(this,b,c,d);this.string=f;this.index=a};g.prototype=new i;g.prototype.constructor=g;Object.defineProperty(g.prototype,"errorMessage",
{get:function(){return"In string:'"+this.string+"' at index:"+this.index+", Expected:"+this.expected+" Found:"+(this.found?this.found:"end of input")}});var j;j=function(b,f){var a=b.valueOf();return q(function(b){return a===b.valueOf()},f)};e=function(b){return j(b,s(b))};var w=function(b,a,c,d){return p(j(a,function(b,e){return new g(b,d,c,a,e)}),b)};var x=function(b,a){b[a]=b[a]||{};return b[a]},y=function(b,a){r(a,x,b)[""]=null;return b},t=function(b,a){return u(Object.keys(b).sort().reverse().map(function(c){return 0===
c.length?n(a):h(p(e(c),t(b[c],a+c)))}))};a=function(a,c){return q(RegExp.prototype.test.bind(a),s(c))};k=d("Any Character",a(/^.$/,"any character"));l=d("Any Letter",a(/^[a-z]$/i,"any letter character"));m=d("Any Whitespace",a(/^\s$/i,"any space character"));d=d("Any Digit",a(/^[0-9]$/i,"any digit character"));c.character=e;c.string=function(a){return h(v(a,w,n(a)))};c.trie=function(a){return h(t(r(a,y,{}),""))};c.match=a;c.anyChar=k;c.letter=l;c.space=m;c.digit=d});
